(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5376:(e,t,a)=>{"use strict";a.d(t,{default:()=>ex});var i=a(5155),s=a(2115),l=a(7108),n=a(3311),r=a(1284),c=a(4616),o=a(2525),d=a(3408),h=a(4229),m=a(4416),x=a(4940),g=a(6740),u=a(9376),p=a(1539),b=a(4653),y=a(7434),f=a(1788),j=a(3816),v=a(7558),N=a(6047),w=a(9957),k=a(3859),z=a(8751),A=a(5011),D=a(8435),C=a(4688),F=a(3758),M=a(3264),S=a(381),P=a(2657),T=a(8749),I=a(4498),B=a(133);function E(e){let{stockFoam:t,position:a,isSelected:l,onClick:n,utilization:r}=e,c=(0,s.useRef)(null),[o,d]=(0,s.useState)(!1);return(0,j.C)(e=>{c.current&&(l?c.current.scale.setScalar(1.02+.01*Math.sin(2*e.clock.elapsedTime)):o?c.current.scale.setScalar(1.01):c.current.scale.setScalar(1))}),(0,i.jsxs)("group",{position:a,children:[(0,i.jsx)(N.az,{ref:c,args:[t.length/10,t.width/10,t.height/10],position:[0,0,0],onPointerOver:()=>d(!0),onPointerOut:()=>d(!1),onClick:n,children:(0,i.jsx)("meshPhysicalMaterial",{color:l?"#3b82f6":r?r>=80?"#10b981":r>=60?"#f59e0b":"#ef4444":"#f1f5f9",transparent:!0,opacity:.3,roughness:.1,metalness:.1,clearcoat:1,clearcoatRoughness:.1})}),(0,i.jsx)(N.az,{args:[t.length/10,t.width/10,t.height/10],position:[0,0,0],children:(0,i.jsx)("meshBasicMaterial",{color:l?"#1d4ed8":"#64748b",wireframe:!0,transparent:!0,opacity:.6})}),(0,i.jsx)(w.E,{position:[0,t.width/10/2+1.5,0],center:!0,distanceFactor:10,children:(0,i.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg shadow-lg border border-gray-200",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:t.label}),(0,i.jsxs)("div",{className:"text-xs text-gray-600",children:[t.length,"\xd7",t.width,"\xd7",t.height,"cm"]}),r&&(0,i.jsxs)("div",{className:"text-xs font-medium ".concat(r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600"),children:[r.toFixed(1),"% verimlilik"]})]})})]})}function q(e){let{piece:t,position:a,originalPiece:l,isHighlighted:n,onHover:r,opacity:c=.8}=e,o=(0,s.useRef)(null),[d,h]=(0,s.useState)(!1);return(0,j.C)(e=>{o.current&&(n?(o.current.position.y=.1*Math.sin(3*e.clock.elapsedTime),o.current.rotation.y=.1*Math.sin(2*e.clock.elapsedTime)):(o.current.position.y=0,o.current.rotation.y=0))}),(0,i.jsxs)("group",{position:[a[0]+t.x/10/10,a[1]+t.y/10/10,a[2]+t.z/10/10],children:[(0,i.jsx)(N.az,{ref:o,args:[l.length/10,l.width/10,l.height/10],onPointerOver:()=>{h(!0),null==r||r(t.pieceId)},onPointerOut:()=>{h(!1),null==r||r(null)},children:(0,i.jsx)("meshPhysicalMaterial",{color:l.color||"#3B82F6",transparent:!0,opacity:n?1:d?.9:c,roughness:.2,metalness:.1,clearcoat:.8,clearcoatRoughness:.2,emissive:n?new M.Q1f(l.color||"#3B82F6").multiplyScalar(.2):new M.Q1f(0)})}),(0,i.jsx)(N.az,{args:[l.length/10,l.width/10,l.height/10],children:(0,i.jsx)("meshBasicMaterial",{color:"#ffffff",wireframe:!0,transparent:!0,opacity:n?.8:.3})}),(d||n)&&(0,i.jsx)(w.E,{position:[0,0,l.height/10/2+.8],center:!0,distanceFactor:8,children:(0,i.jsxs)("div",{className:"bg-black/80 backdrop-blur-sm px-2 py-1 rounded shadow-lg border border-gray-600",children:[(0,i.jsx)("div",{className:"text-xs font-medium text-white",children:l.label}),(0,i.jsxs)("div",{className:"text-xs text-gray-300",children:[l.length,"\xd7",l.width,"\xd7",l.height,"cm"]}),t.rotated&&(0,i.jsx)("div",{className:"text-xs text-yellow-300",children:"\uD83D\uDD04 Rotated"})]})})]})}function K(e){let{children:t,delay:a=0}=e,l=(0,s.useRef)(null),[n,r]=(0,s.useState)(!1);return(0,j.C)(e=>{if(!n&&e.clock.elapsedTime>a&&r(!0),l.current&&n){let e=l.current.scale.x;l.current.scale.setScalar(M.cj9.lerp(e,1,.1))}}),(0,i.jsx)("group",{ref:l,scale:+!!n,children:t})}function O(e){var t;let{pieces:a,stockFoams:l,optimizationResult:n}=e,[r,c]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[h,m]=(0,s.useState)("realistic"),[x,g]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!0),[f,j]=(0,s.useState)(!0),N=(0,s.useMemo)(()=>{if(!n)return{stockPositions:l.map((e,t)=>({stock:e,position:[t*(e.length/10+2),0,0],utilization:0})),pieces:[]};let e=n.layouts.map((e,t)=>{let a=l.find(t=>t.id===e.stockId);return a?{stock:a,position:[t*(a.length/10+3),0,0],layout:e,utilization:e.utilization}:null}).filter(Boolean),t=n.layouts.flatMap((t,i)=>{var s;let l=(null==(s=e[i])?void 0:s.position)||[0,0,0];return t.pieces.map((e,i)=>({piece:e,position:u?[l[0]+i%3*2,l[1]+2*Math.floor(i/3),l[2]]:l,originalPiece:a.find(t=>e.pieceId.startsWith(t.id)),stockId:t.stockId}))}).filter(e=>e.originalPiece);return{stockPositions:e,pieces:t}},[a,l,n,u]);return(0,i.jsxs)("div",{className:"h-full w-full relative",children:[(0,i.jsxs)("div",{className:"absolute top-4 right-4 z-10 bg-white/90 backdrop-blur-sm rounded-lg p-4 shadow-lg space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"3D Kontroller"}),(0,i.jsx)("button",{onClick:()=>g(!x),className:"p-1 hover:bg-gray-200 rounded",title:"İstatistikleri G\xf6ster/Gizle",children:(0,i.jsx)(S.A,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-xs text-gray-600",children:"G\xf6r\xfcn\xfcm Modu:"}),(0,i.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full text-xs border border-gray-300 rounded px-2 py-1 mt-1",children:[(0,i.jsx)("option",{value:"realistic",children:"Ger\xe7ek\xe7i"}),(0,i.jsx)("option",{value:"wireframe",children:"Wireframe"}),(0,i.jsx)("option",{value:"xray",children:"X-Ray"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)("button",{onClick:()=>j(!f),className:"flex items-center space-x-1 px-2 py-1 rounded text-xs ".concat(f?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:[f?(0,i.jsx)(P.A,{className:"w-3 h-3"}):(0,i.jsx)(T.A,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"Bloklar"})]}),(0,i.jsxs)("button",{onClick:()=>y(!b),className:"flex items-center space-x-1 px-2 py-1 rounded text-xs ".concat(b?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:[b?(0,i.jsx)(P.A,{className:"w-3 h-3"}):(0,i.jsx)(T.A,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"Par\xe7alar"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)("button",{onClick:()=>p(!u),className:"flex items-center space-x-1 px-2 py-1 rounded text-xs ".concat(u?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-600"),children:[(0,i.jsx)(I.A,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:u?"Normal":"Exploded"})]}),(0,i.jsxs)("button",{onClick:()=>{console.log("Camera reset")},className:"flex items-center space-x-1 px-2 py-1 rounded text-xs bg-gray-100 text-gray-600 hover:bg-gray-200",children:[(0,i.jsx)(B.A,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"Reset"})]})]})]}),n&&(0,i.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,i.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Verimlilik:"}),(0,i.jsxs)("span",{className:"font-medium",children:[n.efficiency.toFixed(1),"%"]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Kullanılan Blok:"}),(0,i.jsx)("span",{className:"font-medium",children:N.stockPositions.length})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Toplam Par\xe7a:"}),(0,i.jsx)("span",{className:"font-medium",children:N.pieces.length})]}),r&&(0,i.jsxs)("div",{className:"pt-2 border-t border-gray-100",children:[(0,i.jsx)("div",{className:"text-xs font-medium text-blue-600",children:"Se\xe7ili Blok"}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:null==(t=N.stockPositions.find(e=>e.stock.id===r))?void 0:t.stock.label})]})]})})]}),(0,i.jsxs)("div",{className:"absolute bottom-4 left-4 z-10 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg max-w-xs",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Par\xe7a Renkleri:"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[a.slice(0,6).map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded border",style:{backgroundColor:e.color}}),(0,i.jsx)("span",{className:"truncate",children:e.label})]},e.id)),a.length>6&&(0,i.jsxs)("div",{className:"text-gray-500 col-span-2",children:["+",a.length-6," daha..."]})]})]}),(0,i.jsxs)(v.Hl,{camera:{position:[15,15,15],fov:50},shadows:!0,children:[x&&(0,i.jsx)(k.U,{}),(0,i.jsx)("ambientLight",{intensity:.4}),(0,i.jsx)("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0,"shadow-mapSize":[2048,2048],"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),(0,i.jsx)("pointLight",{position:[-10,10,-10],intensity:.3}),(0,i.jsx)(z.OH,{preset:"warehouse"}),(0,i.jsx)(A.x,{args:[50,50],cellSize:1,cellThickness:.5,cellColor:"#6b7280",sectionSize:10,sectionThickness:1,sectionColor:"#374151",fadeDistance:25,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),(0,i.jsx)(D._,{position:[0,-.5,0],opacity:.4,scale:50,blur:1,far:10,resolution:256,color:"#000000"}),f&&N.stockPositions.map((e,t)=>(0,i.jsx)(K,{delay:.2*t,children:(0,i.jsx)(E,{stockFoam:e.stock,position:e.position,isSelected:r===e.stock.id,onClick:()=>c(r===e.stock.id?null:e.stock.id),utilization:e.utilization})},e.stock.id)),b&&N.pieces.filter(e=>!r||e.stockId===r).map((e,t)=>(0,i.jsx)(K,{delay:.5+.1*t,children:(0,i.jsx)(q,{piece:e.piece,position:e.position,originalPiece:e.originalPiece,isHighlighted:o===e.piece.pieceId,onHover:d,opacity:"xray"===h?.3:.8})},"".concat(e.piece.pieceId,"-").concat(t))),(0,i.jsx)(C.N,{enableDamping:!0,dampingFactor:.05,enableZoom:!0,enablePan:!0,maxPolarAngle:Math.PI/2,minDistance:5,maxDistance:100}),(0,i.jsx)(F.u,{makeDefault:!0,position:[15,15,15],fov:50})]})]})}function G(e){let{pieces:t,stockFoams:a,optimizationResult:l,fixedView:n,showTabs:r=!0,scale:c}=e,[o,d]=(0,s.useState)(n||"top"),h=(0,s.useMemo)(()=>{let e=[];return l.layouts.forEach(i=>{let s=a.find(e=>e.id===i.stockId);if(!s)return;let l=[];i.pieces.forEach(e=>{let a=t.find(t=>t.id.startsWith(e.pieceId.split("_")[0]));a&&l.push({piece:a,x:e.x/10,y:e.y/10,z:e.z/10,width:a.length,height:a.width,depth:a.height})}),e.push({stockId:i.stockId,stockFoam:s,placedPieces:l})}),e},[t,a,l]),m=e=>{switch(o){case"top":return{width:e.length,height:e.width,label1:"".concat(e.length),label2:"".concat(e.width)};case"front":return{width:e.length,height:e.height,label1:"".concat(e.length),label2:"".concat(e.height)};case"side":return{width:e.width,height:e.height,label1:"".concat(e.width),label2:"".concat(e.height)}}},x=e=>{switch(o){case"top":return{x:e.x,y:e.y,width:e.width,height:e.height};case"front":return{x:e.x,y:e.z,width:e.width,height:e.depth};case"side":return{x:e.y,y:e.z,width:e.height,height:e.depth}}},g=(0,s.useMemo)(()=>{switch(o){case"top":return{maxWidth:Math.max(...a.map(e=>e.length)),maxHeight:Math.max(...a.map(e=>e.width))};case"front":return{maxWidth:Math.max(...a.map(e=>e.length)),maxHeight:Math.max(...a.map(e=>e.height))};case"side":return{maxWidth:Math.max(...a.map(e=>e.width)),maxHeight:Math.max(...a.map(e=>e.height))}}},[a,o]),u=c||Math.min(1200/g.maxWidth,300/g.maxHeight,1.2);return(0,i.jsxs)("div",{className:"w-full bg-white",children:[r&&(0,i.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,i.jsx)("div",{className:"flex space-x-1",children:[{key:"top",label:"Yukarıdan",subtitle:"X-Y"},{key:"front",label:"\xd6nden",subtitle:"X-Z"},{key:"side",label:"Yandan",subtitle:"Y-Z"}].map(e=>(0,i.jsx)("button",{onClick:()=>!n&&d(e.key),disabled:void 0!==n,className:"px-4 py-2 text-sm font-medium border-b-2 transition-colors ".concat(o===e.key?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"," ").concat(n?"cursor-not-allowed":"cursor-pointer"),children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"font-semibold",children:e.label}),(0,i.jsx)("div",{className:"text-xs opacity-75",children:e.subtitle})]})},e.key))})}),(0,i.jsx)("div",{className:"w-full",children:h.map((e,t)=>{var a,s;let n=m(e.stockFoam),r=n.width*u,c=n.height*u;return(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"mb-4 text-center",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:["Blok ",t+1," - ",e.stockFoam.label]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Verimlilik: %",null==(a=l.layouts[t])?void 0:a.utilization.toFixed(1)]})]}),(0,i.jsx)("div",{className:"w-full overflow-hidden",children:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)("div",{className:"relative inline-block",children:[(0,i.jsx)("div",{className:"relative bg-white border-2 border-gray-800",style:{width:r,height:c,minWidth:"300px",minHeight:"150px"},children:e.placedPieces.map((e,t)=>{let a=x(e);return(0,i.jsx)("div",{className:"absolute border border-gray-600 flex items-center justify-center text-white font-bold text-xs",style:{left:a.x*u,top:a.y*u,width:a.width*u,height:a.height*u,backgroundColor:e.piece.color||"#4F46E5",fontSize:Math.max(8,Math.min(12,a.width*u/8))+"px"},children:(0,i.jsx)("div",{className:"text-center leading-tight",children:(0,i.jsx)("div",{children:e.piece.label})})},t)})}),(0,i.jsx)("div",{className:"absolute text-center text-sm font-bold text-red-600",style:{bottom:"-25px",left:"0",right:"0"},children:n.label1}),(0,i.jsx)("div",{className:"absolute text-sm font-bold text-red-600",style:{right:"-40px",top:"50%",transform:"translateY(-50%) rotate(90deg)",transformOrigin:"center"},children:n.label2}),(0,i.jsxs)("svg",{className:"absolute top-0 left-0 pointer-events-none opacity-20",width:r,height:c,children:[Array.from({length:Math.floor(n.width/50)+1},(e,t)=>(0,i.jsx)("line",{x1:50*t*u,y1:0,x2:50*t*u,y2:c,stroke:"#ddd",strokeWidth:"1"},"v-".concat(t))),Array.from({length:Math.floor(n.height/50)+1},(e,t)=>(0,i.jsx)("line",{x1:0,y1:50*t*u,x2:r,y2:50*t*u,stroke:"#ddd",strokeWidth:"1"},"h-".concat(t)))]})]})})}),(0,i.jsx)("div",{className:"mt-6 text-center",children:(0,i.jsxs)("div",{className:"inline-flex items-center space-x-4 text-sm text-gray-600",children:[(0,i.jsxs)("span",{children:["Toplam Par\xe7a: ",e.placedPieces.length]}),(0,i.jsx)("span",{children:"•"}),(0,i.jsxs)("span",{children:["Boyutlar: ",n.label1," \xd7 ",n.label2," cm"]}),(0,i.jsx)("span",{children:"•"}),(0,i.jsxs)("span",{className:"text-green-600 font-semibold",children:["Verimlilik: %",null==(s=l.layouts[t])?void 0:s.utilization.toFixed(1)]})]})})]},e.stockId)})}),r&&(0,i.jsx)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200",children:(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:"top"===o?"Yukarıdan Bakış":"front"===o?"\xd6nden Bakış":"Yandan Bakış"}),(0,i.jsxs)("div",{className:"text-gray-600 space-y-1",children:["top"===o&&(0,i.jsx)("div",{children:"• Uzunluk \xd7 Genişlik boyutları g\xf6r\xfcn\xfcr"}),"front"===o&&(0,i.jsx)("div",{children:"• Uzunluk \xd7 Kalınlık boyutları g\xf6r\xfcn\xfcr"}),"side"===o&&(0,i.jsx)("div",{children:"• Genişlik \xd7 Kalınlık boyutları g\xf6r\xfcn\xfcr"}),(0,i.jsx)("div",{children:"• Her renkli alan bir par\xe7ayı temsil eder"}),(0,i.jsx)("div",{children:"• Boyutlar santimetre (cm) cinsindendir"})]})]})})]})}class R{getRotations(e){let{length:t,width:a,height:i}=e;return[{length:t,width:a,height:i,rotationId:0},{length:a,width:t,height:i,rotationId:1},{length:t,width:i,height:a,rotationId:2},{length:i,width:a,height:t,rotationId:3},{length:a,width:i,height:t,rotationId:4},{length:i,width:t,height:a,rotationId:5},{length:i,width:a,height:t,rotationId:6}].filter((e,t,a)=>!a.slice(0,t).some(t=>t.length===e.length&&t.width===e.width&&t.height===e.height))}canFit(e,t,a,i,s){let{length:l,width:n,height:r}=s;if(t+l>this.stockLength||a+n>this.stockWidth||i+r>this.stockHeight)return!1;for(let e of this.placedPieces)if(this.isOverlapping(t,a,i,l,n,r,e.x,e.y,e.z,e.length,e.width,e.height))return!1;return!0}isOverlapping(e,t,a,i,s,l,n,r,c,o,d,h){return!(e>=n+o||n>=e+i||t>=r+d||r>=t+s||a>=c+h||c>=a+l)}findBestPosition(e){let t=this.generateCandidatePositions(),a=this.getRotations(e);for(let i of t)for(let t of a)if(this.canFit(e,i.x,i.y,i.z,t))return{...i,rotation:t};return null}generateCandidatePositions(){let e=[];for(let t of(e.push({x:0,y:0,z:0}),this.placedPieces))e.push({x:t.x+t.length,y:t.y,z:t.z},{x:t.x,y:t.y+t.width,z:t.z},{x:t.x,y:t.y,z:t.z+t.height});return e.sort((e,t)=>e.z!==t.z?e.z-t.z:e.y!==t.y?e.y-t.y:e.x-t.x)}addPiece(e,t,a,i,s){return!!this.canFit(e,t,a,i,s)&&(this.placedPieces.push({pieceId:e.id,x:t,y:a,z:i,length:s.length,width:s.width,height:s.height,rotated:s.rotationId>0}),!0)}getUtilization(){return this.placedPieces.reduce((e,t)=>e+t.length*t.width*t.height,0)/(this.stockLength*this.stockWidth*this.stockHeight)*100}getPlacedPieces(){return[...this.placedPieces]}constructor(e,t,a){this.placedPieces=[],this.stockLength=e,this.stockWidth=t,this.stockHeight=a}}class L{async optimize(e,t){await new Promise(e=>setTimeout(e,800));let a=[],i=0,s=0,l=0,n=[...this.expandPieces(e).sort((e,t)=>{let a=e.length*e.width*e.height;return t.length*t.width*t.height-a})],r=0;for(;n.length>0&&r<t.length;){let e=t[r],c=new R(e.length,e.width,e.height),o=0,d=0;for(;d<n.length;){let e=n[d],t=c.findBestPosition(e);t?(c.addPiece(e,t.x,t.y,t.z,t.rotation),n.splice(d,1),o++):d++}if(o>0){let t=c.getUtilization(),n=e.length*e.width*e.height;a.push({stockId:e.id,pieces:c.getPlacedPieces(),utilization:t}),i+=n*t/100,s+=n,l+=e.price||0}r++}let c=s>0?i/s*100:0;return{layouts:a,totalWaste:100-c,totalCost:l,efficiency:c}}expandPieces(e){let t=[];return e.forEach(e=>{for(let a=0;a<e.quantity;a++)t.push({...e,id:"".concat(e.id,"_").concat(a),quantity:1})}),t}}class V{async optimize(){console.log("\uD83E\uDDEC Genetic Algorithm başlıyor...");let e=this.createInitialPopulation();e=this.evaluatePopulation(e);let t=this.getBestIndividual(e),a=[];for(let i=0;i<this.generations;i++){e=this.evolvePopulation(e),e=this.evaluatePopulation(e);let s=this.getBestIndividual(e);if(s.fitness>t.fitness&&(t=s,console.log("\uD83C\uDFAF Gen ".concat(i,": Yeni en iyi fitness = ").concat(s.fitness.toFixed(3)))),a.push({generation:i,bestFitness:s.fitness,avgFitness:e.reduce((e,t)=>e+t.fitness,0)/e.length,efficiency:s.efficiency,waste:s.waste}),i>20){let e=a.slice(-20).map(e=>e.bestFitness);if(Math.max(...e)-Math.min(...e)<.001){console.log("⚡ Erken durdurma: Gen ".concat(i));break}}}return console.log("\uD83C\uDFC6 En iyi \xe7\xf6z\xfcm: Verimlilik = ".concat(t.efficiency.toFixed(1),"%")),{layouts:this.genesToLayouts(t.genes),efficiency:t.efficiency,totalWaste:t.waste,totalCost:0,algorithmData:{type:"genetic",generations:a.length,finalPopulation:e.length,convergenceData:a}}}createInitialPopulation(){let e=[];for(let t=0;t<this.populationSize;t++){let t={genes:[],fitness:0,efficiency:0,waste:0};for(let e of this.expandedPieces){let a=Math.floor(Math.random()*this.stockFoams.length),i=this.stockFoams[a],s={pieceId:e.id,stockId:i.id,x:Math.random()*(i.length-e.length),y:Math.random()*(i.width-e.width),z:Math.random()*(i.height-e.height),rotation:Math.floor(8*Math.random())};t.genes.push(s)}e.push(t)}return e}evaluatePopulation(e){return e.map(e=>{let t=this.genesToLayouts(e.genes),a=this.calculateMetrics(t);return e.efficiency=a.efficiency,e.waste=a.waste,e.fitness=this.calculateFitness(a),e})}calculateFitness(e){let t=e.efficiency/100;return .7*t+.2*(1-e.waste/100)+.1*!!e.feasible}evolvePopulation(e){let t=[],a=Math.floor(this.populationSize*this.elitismRate),i=e.sort((e,t)=>t.fitness-e.fitness);for(t.push(...i.slice(0,a));t.length<this.populationSize;){let a,i,s=this.tournamentSelection(e),l=this.tournamentSelection(e);Math.random()<this.crossoverRate?[a,i]=this.crossover(s,l):(a={...s},i={...l}),Math.random()<this.mutationRate&&(a=this.mutate(a)),Math.random()<this.mutationRate&&(i=this.mutate(i)),t.push(a),t.length<this.populationSize&&t.push(i)}return t}tournamentSelection(e){let t=[];for(let a=0;a<5;a++){let a=Math.floor(Math.random()*e.length);t.push(e[a])}return t.reduce((e,t)=>t.fitness>e.fitness?t:e)}crossover(e,t){let a={genes:[],fitness:0,efficiency:0,waste:0},i={genes:[],fitness:0,efficiency:0,waste:0},s=Math.floor(Math.random()*e.genes.length);return a.genes=[...e.genes.slice(0,s),...t.genes.slice(s)],i.genes=[...t.genes.slice(0,s),...e.genes.slice(s)],[a,i]}mutate(e){let t={...e,genes:[...e.genes]},a=Math.floor(Math.random()*t.genes.length),i={...t.genes[a]},s=this.stockFoams.find(e=>e.id===i.stockId);if(s){let e=this.expandedPieces.find(e=>e.id===i.pieceId);e&&(.5>Math.random()?(i.x=Math.max(0,Math.min(s.length-e.length,i.x+(Math.random()-.5)*20)),i.y=Math.max(0,Math.min(s.width-e.width,i.y+(Math.random()-.5)*20)),i.z=Math.max(0,Math.min(s.height-e.height,i.z+(Math.random()-.5)*20))):i.rotation=Math.floor(8*Math.random()))}return t.genes[a]=i,t}getBestIndividual(e){return e.reduce((e,t)=>t.fitness>e.fitness?t:e)}genesToLayouts(e){let t=new Map;return e.forEach(e=>{t.has(e.stockId)||t.set(e.stockId,{stockId:e.stockId,pieces:[],utilization:0}),t.get(e.stockId).pieces.push({pieceId:e.pieceId,x:10*e.x,y:10*e.y,z:10*e.z,rotated:e.rotation>0})}),Array.from(t.values()).map(e=>{let t=this.stockFoams.find(t=>t.id===e.stockId);if(t){let a=t.length*t.width*t.height,i=e.pieces.reduce((e,t)=>{let a=this.expandedPieces.find(e=>e.id===t.pieceId);return e+(a?a.length*a.width*a.height:0)},0);e.utilization=i/a*100}return e})}calculateMetrics(e){let t=0,a=0,i=!0;e.forEach(e=>{let s=this.stockFoams.find(t=>t.id===e.stockId);if(s){let l=s.length*s.width*s.height;a+=l,t+=l*e.utilization/100,e.pieces.length>0&&this.checkOverlaps(e.pieces)>0&&(i=!1)}});let s=a>0?t/a*100:0;return{efficiency:s,waste:100-s,feasible:i}}checkOverlaps(e){let t=0;for(let a=0;a<e.length;a++)for(let i=a+1;i<e.length;i++){let s=e[a],l=e[i],n=this.expandedPieces.find(e=>e.id===s.pieceId),r=this.expandedPieces.find(e=>e.id===l.pieceId);n&&r&&this.isOverlapping(s.x/10,s.y/10,s.z/10,n.length,n.width,n.height,l.x/10,l.y/10,l.z/10,r.length,r.width,r.height)&&t++}return t}isOverlapping(e,t,a,i,s,l,n,r,c,o,d,h){return!(e>=n+o||n>=e+i||t>=r+d||r>=t+s||a>=c+h||c>=a+l)}expandPieces(e){let t=[];return e.forEach(e=>{for(let a=0;a<e.quantity;a++)t.push({...e,id:"".concat(e.id,"_").concat(a),quantity:1})}),t}constructor(e,t){this.populationSize=50,this.generations=100,this.mutationRate=.1,this.crossoverRate=.8,this.elitismRate=.2,this.pieces=e,this.stockFoams=t,this.expandedPieces=this.expandPieces(e)}}class Y{async optimize(){console.log("\uD83D\uDD25 Simulated Annealing başlıyor...");let e=this.generateInitialSolution(),t={...e},a=this.initialTemperature,i=0,s=0,l=0,n=[];for(;a>this.finalTemperature&&i<this.maxIterations;){let r=this.generateNeighbor(e),c=r.energy-e.energy;Math.random()<(c<0?1:Math.exp(-c/a))?(e=r,s++,e.energy<t.energy&&(t={...e},console.log("\uD83C\uDFAF Yeni en iyi \xe7\xf6z\xfcm: Verimlilik = ".concat(t.efficiency.toFixed(2),"%")))):l++,a*=this.coolingRate,++i%100==0&&n.push({iteration:i,temperature:a.toFixed(2),currentEnergy:e.energy,bestEnergy:t.energy,efficiency:t.efficiency,acceptanceRate:s/(s+l)})}return console.log("\uD83C\uDFC6 SA tamamlandı: ".concat(i," iterasyon, En iyi verimlilik = ").concat(t.efficiency.toFixed(1),"%")),{layouts:this.solutionToLayouts(t),efficiency:t.efficiency,totalWaste:t.waste,totalCost:0,algorithmData:{type:"simulated_annealing",iterations:i,finalTemperature:a,acceptanceRate:s/(s+l),coolingData:n}}}generateInitialSolution(){let e=[];for(let t of this.expandedPieces.sort((e,t)=>{let a=e.length*e.width*e.height;return t.length*t.width*t.height-a})){let a=!1;for(let i of this.stockFoams){for(let s=0;s<8;s++){let l=this.getRotatedDimensions(t,s),n=Math.random()*Math.max(0,i.length-l.length),r=Math.random()*Math.max(0,i.width-l.width),c=Math.random()*Math.max(0,i.height-l.height);e.push({pieceId:t.id,stockId:i.id,x:n,y:r,z:c,rotation:s}),a=!0;break}if(a)break}}let t={placements:e,energy:0,efficiency:0,waste:0};return this.evaluateSolution(t),t}generateNeighbor(e){let t={placements:[...e.placements],energy:0,efficiency:0,waste:0},a=Math.random();return a<.4?this.movePiece(t):a<.7?this.rotatePiece(t):a<.9?this.swapPieces(t):this.moveToAnotherStock(t),this.evaluateSolution(t),t}movePiece(e){if(0===e.placements.length)return;let t=Math.floor(Math.random()*e.placements.length),a=e.placements[t],i=this.stockFoams.find(e=>e.id===a.stockId),s=this.expandedPieces.find(e=>e.id===a.pieceId);if(i&&s){let e=this.getRotatedDimensions(s,a.rotation),t=Math.max(0,i.length-e.length),l=Math.max(0,i.width-e.width),n=Math.max(0,i.height-e.height);a.x=Math.min(t,Math.max(0,a.x+(Math.random()-.5)*30)),a.y=Math.min(l,Math.max(0,a.y+(Math.random()-.5)*30)),a.z=Math.min(n,Math.max(0,a.z+(Math.random()-.5)*30))}}rotatePiece(e){if(0===e.placements.length)return;let t=Math.floor(Math.random()*e.placements.length),a=e.placements[t];a.rotation=Math.floor(8*Math.random());let i=this.stockFoams.find(e=>e.id===a.stockId),s=this.expandedPieces.find(e=>e.id===a.pieceId);if(i&&s){let e=this.getRotatedDimensions(s,a.rotation);a.x=Math.min(a.x,i.length-e.length),a.y=Math.min(a.y,i.width-e.width),a.z=Math.min(a.z,i.height-e.height),a.x=Math.max(0,a.x),a.y=Math.max(0,a.y),a.z=Math.max(0,a.z)}}swapPieces(e){if(e.placements.length<2)return;let t=Math.floor(Math.random()*e.placements.length),a=Math.floor(Math.random()*e.placements.length);for(;a===t;)a=Math.floor(Math.random()*e.placements.length);let i={...e.placements[t]};e.placements[t]={...e.placements[a]},e.placements[a]=i}moveToAnotherStock(e){if(0===e.placements.length)return;let t=Math.floor(Math.random()*e.placements.length),a=e.placements[t],i=this.stockFoams[Math.floor(Math.random()*this.stockFoams.length)],s=this.expandedPieces.find(e=>e.id===a.pieceId);if(s){let e=this.getRotatedDimensions(s,a.rotation);i.length>=e.length&&i.width>=e.width&&i.height>=e.height&&(a.stockId=i.id,a.x=Math.random()*(i.length-e.length),a.y=Math.random()*(i.width-e.width),a.z=Math.random()*(i.height-e.height))}}evaluateSolution(e){let t=this.solutionToLayouts(e),a=0,i=0,s=0,l=0;t.forEach(e=>{let t=this.stockFoams.find(t=>t.id===e.stockId);if(t){let n=t.length*t.width*t.height;i+=n,a+=n*e.utilization/100,s+=this.calculateOverlapPenalty(e.pieces,t),l+=this.calculateBoundsViolation(e.pieces,t)}});let n=i>0?a/i*100:0,r=100-n;e.energy=100-n+100*s+50*l,e.efficiency=n,e.waste=r}calculateOverlapPenalty(e,t){let a=0;for(let t=0;t<e.length;t++)for(let i=t+1;i<e.length;i++){let s=e[t],l=e[i],n=this.expandedPieces.find(e=>e.id===s.pieceId),r=this.expandedPieces.find(e=>e.id===l.pieceId);if(n&&r){let e=this.getRotatedDimensions(n,s.rotation||0),t=this.getRotatedDimensions(r,l.rotation||0);this.isOverlapping(s.x/10,s.y/10,s.z/10,e.length,e.width,e.height,l.x/10,l.y/10,l.z/10,t.length,t.width,t.height)&&a++}}return a}calculateBoundsViolation(e,t){let a=0;return e.forEach(e=>{let i=this.expandedPieces.find(t=>t.id===e.pieceId);if(i){let s=this.getRotatedDimensions(i,e.rotation||0);(e.x/10+s.length>t.length||e.y/10+s.width>t.width||e.z/10+s.height>t.height||e.x<0||e.y<0||e.z<0)&&a++}}),a}getRotatedDimensions(e,t){return[{length:e.length,width:e.width,height:e.height},{length:e.width,width:e.length,height:e.height},{length:e.length,width:e.height,height:e.width},{length:e.height,width:e.length,height:e.width},{length:e.width,width:e.height,height:e.length},{length:e.height,width:e.width,height:e.length},{length:e.height,width:e.length,height:e.width},{length:e.width,width:e.height,height:e.length}][t%8]}isOverlapping(e,t,a,i,s,l,n,r,c,o,d,h){return!(e>=n+o||n>=e+i||t>=r+d||r>=t+s||a>=c+h||c>=a+l)}solutionToLayouts(e){let t=new Map;return e.placements.forEach(e=>{t.has(e.stockId)||t.set(e.stockId,{stockId:e.stockId,pieces:[],utilization:0}),t.get(e.stockId).pieces.push({pieceId:e.pieceId,x:10*e.x,y:10*e.y,z:10*e.z,rotated:e.rotation>0,rotation:e.rotation})}),Array.from(t.values()).map(e=>{let t=this.stockFoams.find(t=>t.id===e.stockId);if(t){let a=t.length*t.width*t.height,i=e.pieces.reduce((e,t)=>{let a=this.expandedPieces.find(e=>e.id===t.pieceId);return e+(a?a.length*a.width*a.height:0)},0);e.utilization=i/a*100}return e})}expandPieces(e){let t=[];return e.forEach(e=>{for(let a=0;a<e.quantity;a++)t.push({...e,id:"".concat(e.id,"_").concat(a),quantity:1})}),t}constructor(e,t){this.initialTemperature=1e3,this.finalTemperature=1,this.coolingRate=.99,this.maxIterations=1e4,this.pieces=e,this.stockFoams=t,this.expandedPieces=this.expandPieces(e)}}class H{async optimizeWithMultipleAlgorithms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["basic","genetic","annealing"];console.log("\uD83D\uDE80 Multi-Algorithm Optimization başlıyor..."),console.log("\uD83D\uDCCA Test edilecek algoritmalar: ".concat(e.join(", ")));let t=[],a=Date.now();for(let a=0;a<e.length;a++){let l=e[a],n=Date.now();this.progressCallback&&this.progressCallback({algorithm:"basic"===l?"⚡ Temel":"genetic"===l?"\uD83E\uDDEC Genetik":"\uD83D\uDD25 Tavlama",progress:a/e.length*100,stage:"".concat(l," algoritması \xe7alışıyor...")});try{var i,s;let r,c=[];switch(l){case"basic":console.log("⚡ Basic Algorithm \xe7alışıyor...");let o=new L;r=await o.optimize(this.pieces.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})),this.stockFoams.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})));break;case"genetic":console.log("\uD83E\uDDEC Genetic Algorithm \xe7alışıyor...");let d=new V(this.pieces,this.stockFoams);c=(null==(i=(r=await d.optimize()).algorithmData)?void 0:i.convergenceData)||[];break;case"annealing":console.log("\uD83D\uDD25 Simulated Annealing \xe7alışıyor...");let h=new Y(this.pieces,this.stockFoams);c=(null==(s=(r=await h.optimize()).algorithmData)?void 0:s.coolingData)||[];break;default:throw Error("Bilinmeyen algoritma: ".concat(l))}let m=Date.now()-n;t.push({name:l,result:r,executionTime:m,efficiency:r.efficiency,waste:r.totalWaste,convergenceData:c}),this.progressCallback&&this.progressCallback({algorithm:"basic"===l?"⚡ Temel":"genetic"===l?"\uD83E\uDDEC Genetik":"\uD83D\uDD25 Tavlama",progress:(a+1)/e.length*100,stage:"".concat(l," tamamlandı! (").concat(r.efficiency.toFixed(1),"% verimlilik)")}),await new Promise(e=>setTimeout(e,200))}catch(e){console.error("❌ ".concat(l," algoritmasında hata:"),e),t.push({name:l,result:null,executionTime:Date.now()-n,efficiency:0,waste:100,error:e.message})}}let l=t.filter(e=>null!==e.result),n=Date.now()-a,r=l.reduce((e,t)=>t.efficiency>e.efficiency?t:e),c=this.generateComparison(l);return console.log("\uD83C\uDFC6 Multi-Algorithm Optimization tamamlandı!"),console.log("⏱️ Toplam s\xfcre: ".concat(n,"ms")),console.log("\uD83E\uDD47 En iyi algoritma: ".concat(r.name," (").concat(r.efficiency.toFixed(1),"% verimlilik)")),{...r.result,algorithmComparison:{totalExecutionTime:n,bestAlgorithm:r.name,results:l.map(e=>({name:e.name,efficiency:e.efficiency,waste:e.waste,executionTime:e.executionTime,rank:l.sort((e,t)=>t.efficiency-e.efficiency).findIndex(t=>t.name===e.name)+1})),comparison:c,convergenceAnalysis:this.analyzeConvergence(l)}}}async optimizeWithHybridApproach(){console.log("\uD83D\uDD2C Hybrid Optimization başlıyor..."),console.log("⚡ 1. Aşama: Basic Algorithm ile hızlı başlangı\xe7..."),this.progressCallback&&this.progressCallback({algorithm:"⚡ Temel Algoritma",progress:33,stage:"Aşama 1: Hızlı başlangı\xe7..."});let e=new L,t=await e.optimize(this.pieces.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})),this.stockFoams.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})));console.log("\uD83E\uDDEC 2. Aşama: Genetic Algorithm ile iyileştirme..."),this.progressCallback&&this.progressCallback({algorithm:"\uD83E\uDDEC Genetik Algoritma",progress:66,stage:"Aşama 2: Genetik iyileştirme..."});let a=new V(this.pieces,this.stockFoams),i=await a.optimize();console.log("\uD83D\uDD25 3. Aşama: Simulated Annealing ile rafine etme..."),this.progressCallback&&this.progressCallback({algorithm:"\uD83D\uDD25 Simulated Annealing",progress:100,stage:"Aşama 3: Son rafine etme..."});let s=new Y(this.pieces,this.stockFoams),l=await s.optimize(),n=[{name:"basic",...t},{name:"genetic",...i},{name:"annealing",...l}].reduce((e,t)=>t.efficiency>e.efficiency?t:e);return console.log("\uD83C\uDFC6 Hybrid Optimization tamamlandı!"),console.log("\uD83E\uDD47 En iyi sonu\xe7: ".concat(n.name," (").concat(n.efficiency.toFixed(1),"% verimlilik)")),{...n,hybridAnalysis:{stages:[{stage:1,algorithm:"basic",efficiency:t.efficiency},{stage:2,algorithm:"genetic",efficiency:i.efficiency},{stage:3,algorithm:"annealing",efficiency:l.efficiency}],improvement:n.efficiency-t.efficiency,bestAlgorithm:n.name}}}async optimizeWithAdaptiveParameters(){console.log("\uD83C\uDFAF Adaptive Parameter Optimization başlıyor...");let e=this.pieces.reduce((e,t)=>e+t.quantity,0),t=this.stockFoams.length,a=e*t;return(console.log("\uD83D\uDCCA Problem analizi: ".concat(e," par\xe7a, ").concat(t," stok, karmaşıklık: ").concat(a)),a<50)?(console.log("\uD83C\uDFC3‍♂️ K\xfc\xe7\xfck problem: Basic + Annealing kombinasyonu"),this.runBasicWithAnnealing()):a<200?(console.log("⚖️ Orta problem: Genetic + Annealing kombinasyonu"),this.runGeneticWithAnnealing()):(console.log("\uD83E\uDDBE B\xfcy\xfck problem: T\xfcm algoritmalar + paralel işleme"),this.optimizeWithMultipleAlgorithms(["genetic","annealing"]))}async runBasicWithAnnealing(){let e=new L,t=await e.optimize(this.pieces.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})),this.stockFoams.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height}))),a=new Y(this.pieces,this.stockFoams),i=await a.optimize();return i.efficiency>t.efficiency?i:t}async runGeneticWithAnnealing(){let e=new V(this.pieces,this.stockFoams),t=await e.optimize(),a=new Y(this.pieces,this.stockFoams),i=await a.optimize();return i.efficiency>t.efficiency?i:t}generateComparison(e){return{ranking:[...e].sort((e,t)=>t.efficiency-e.efficiency).map((e,t)=>({rank:t+1,algorithm:e.name,efficiency:e.efficiency,waste:e.waste,executionTime:e.executionTime,score:this.calculateOverallScore(e)})),analysis:{bestEfficiency:Math.max(...e.map(e=>e.efficiency)),worstEfficiency:Math.min(...e.map(e=>e.efficiency)),avgEfficiency:e.reduce((e,t)=>e+t.efficiency,0)/e.length,fastestTime:Math.min(...e.map(e=>e.executionTime)),slowestTime:Math.max(...e.map(e=>e.executionTime)),avgTime:e.reduce((e,t)=>e+t.executionTime,0)/e.length}}}calculateOverallScore(e){return(.7*(e.efficiency/100)+.3*Math.max(0,1-e.executionTime/1e4))*100}analyzeConvergence(e){let t={};return e.forEach(e=>{if(e.convergenceData&&e.convergenceData.length>0){let a=e.convergenceData,i=a[a.length-1].efficiency||100*a[a.length-1].bestFitness,s=a[0].efficiency||100*a[0].bestFitness;t[e.name]={totalImprovement:i-s,convergenceSpeed:this.calculateConvergenceSpeed(a),stabilityPoint:this.findStabilityPoint(a),iterations:a.length}}}),t}calculateConvergenceSpeed(e){if(e.length<2)return 0;let t=0;for(let a=1;a<e.length;a++)(e[a].efficiency||100*e[a].bestFitness)>(e[a-1].efficiency||100*e[a-1].bestFitness)&&t++;return t/(e.length-1)}findStabilityPoint(e){if(e.length<10)return e.length;for(let t=5;t<e.length;t++){let a=e.slice(t-5,t).map(e=>e.efficiency||100*e.bestFitness);if(.1>this.calculateVariance(a))return t-5}return e.length}calculateVariance(e){let t=e.reduce((e,t)=>e+t,0)/e.length;return e.map(e=>Math.pow(e-t,2)).reduce((e,t)=>e+t,0)/e.length}constructor(e,t,a){this.pieces=e,this.stockFoams=t,this.progressCallback=a}}class W{async optimize(){console.log("\uD83D\uDD2A Guillotine Cutting Engine başlıyor..."),console.log("\uD83D\uDCD0 Ger\xe7ek makine kısıtlamaları: Sadece d\xfcz kesimler");let e=[],t=[...this.expandedPieces];for(let a of this.stockFoams)for(let i=0;i<a.quantity&&0!==t.length;i++){console.log("\uD83D\uDCE6 Blok ".concat(i+1,"/").concat(a.quantity," işleniyor..."));let s=this.createGuillotineLayout(a,t);if(s.pieces.length>0){e.push(s);let a=s.pieces.map(e=>e.pieceId);t=t.filter(e=>!a.includes(e.id)),console.log("✅ ".concat(s.pieces.length," par\xe7a yerleştirildi, verimlilik: ").concat(s.utilization.toFixed(1),"%"))}}let a=e.reduce((e,t)=>{let a=this.stockFoams.find(e=>e.id===t.stockId);return e+(a?a.length*a.width*a.height*t.utilization/100:0)},0),i=e.reduce((e,t)=>{let a=this.stockFoams.find(e=>e.id===t.stockId);return e+(a?a.length*a.width*a.height:0)},0),s=i>0?a/i*100:0,l=100-s;return console.log("\uD83C\uDFC6 Guillotine optimizasyon tamamlandı!"),console.log("\uD83D\uDCCA Verimlilik: ".concat(s.toFixed(1),"%, İsraf: ").concat(l.toFixed(1),"%")),console.log("\uD83D\uDD2A Toplam kesim sayısı: ".concat(this.calculateTotalCuts(e))),{layouts:e.map(e=>({stockId:e.stockId,pieces:e.pieces.map(e=>({pieceId:e.pieceId,x:10*e.x,y:10*e.y,z:10*e.z,rotated:e.rotated})),utilization:e.utilization,cuttingPattern:{horizontalCuts:e.horizontalCuts,verticalCuts:e.verticalCuts,totalCuts:e.horizontalCuts.length+e.verticalCuts.length}})),efficiency:s,totalWaste:l,totalCost:0,cuttingInstructions:this.generateCuttingInstructions(e),algorithmData:{type:"guillotine",totalCuts:this.calculateTotalCuts(e),cuttingTime:this.estimateCuttingTime(e)}}}createGuillotineLayout(e,t){let a=t.sort((e,t)=>{let a=e.length*e.width;return t.length*t.width-a}),i={stockId:e.id,pieces:[],horizontalCuts:[],verticalCuts:[],utilization:0},s=0,l=0,n=0,r=0;for(let t of a){let a=[{width:t.length,height:t.width,rotated:!1},{width:t.width,height:t.length,rotated:!0}],c=!1;for(let r of a)if(s+r.width<=e.length&&l+r.height<=e.width){if(i.pieces.push({pieceId:t.id,x:s,y:l,z:0,width:r.width,height:r.height,rotated:r.rotated}),s+r.width<e.length){let e=s+r.width;i.verticalCuts.includes(e)||i.verticalCuts.push(e)}if(l+r.height<e.width){let e=l+r.height;i.horizontalCuts.includes(e)||i.horizontalCuts.push(e)}s+=r.width,n=Math.max(n,r.height),c=!0;break}if(!c&&n>0){for(let o of(s=0,l+=n,r=Math.max(r,l),n=0,a))if(s+o.width<=e.length&&l+o.height<=e.width){if(i.pieces.push({pieceId:t.id,x:s,y:l,z:0,width:o.width,height:o.height,rotated:o.rotated}),s+o.width<e.length){let e=s+o.width;i.verticalCuts.includes(e)||i.verticalCuts.push(e)}if(l+o.height<e.width){let e=l+o.height;i.horizontalCuts.includes(e)||i.horizontalCuts.push(e)}s+=o.width,n=Math.max(n,o.height),c=!0;break}}if(!c)break}let c=i.pieces.reduce((e,t)=>e+t.width*t.height,0);return i.utilization=c/(e.length*e.width)*100,i.horizontalCuts.sort((e,t)=>e-t),i.verticalCuts.sort((e,t)=>e-t),i}generateCuttingInstructions(e){let t=[];for(let a=0;a<e.length;a++){let i=e[a],s=this.stockFoams.find(e=>e.id===i.stockId);t.push({blockNumber:a+1,stockLabel:(null==s?void 0:s.label)||"Bilinmeyen",steps:[{phase:1,description:"Yatay Kesimler (X ekseni)",cuts:i.horizontalCuts.map(e=>({type:"horizontal",position:e,description:"Y=".concat(e,"cm pozisyonundan yatay kesim (sol→sağ)")}))},{phase:2,description:"Dikey Kesimler (Y ekseni)",cuts:i.verticalCuts.map(e=>({type:"vertical",position:e,description:"X=".concat(e,"cm pozisyonundan dikey kesim (yukarı→aşağı)")}))}],totalCuts:i.horizontalCuts.length+i.verticalCuts.length,estimatedTime:this.estimateBlockCuttingTime(i)})}return{instructions:t,summary:{totalBlocks:e.length,totalCuts:this.calculateTotalCuts(e),estimatedTotalTime:t.reduce((e,t)=>e+t.estimatedTime,0)}}}calculateTotalCuts(e){return e.reduce((e,t)=>e+t.horizontalCuts.length+t.verticalCuts.length,0)}estimateCuttingTime(e){return 15*this.calculateTotalCuts(e)}estimateBlockCuttingTime(e){return(e.horizontalCuts.length+e.verticalCuts.length)*15}expandPieces(e){let t=[];return e.forEach(e=>{for(let a=0;a<e.quantity;a++)t.push({...e,id:"".concat(e.id,"_").concat(a),quantity:1})}),t}constructor(e,t){this.pieces=e,this.stockFoams=t,this.expandedPieces=this.expandPieces(e)}}var U=a(2713),_=a(3109),X=a(6785),Z=a(9037),Q=a(4186),J=a(3052);function $(e){var t,a,l,n,r,c,o,d,h,m;let{optimizationResult:x}=e,[g,b]=(0,s.useState)("overview");if(!x||!x.algorithmComparison)return null;let{algorithmComparison:y,hybridAnalysis:f}=x,j=[{id:"overview",label:"Genel Bakış",icon:U.A},{id:"comparison",label:"Karşılaştırma",icon:_.A},{id:"convergence",label:"Yakınsama",icon:X.A},{id:"performance",label:"Performans",icon:p.A}];return(0,i.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl lg:rounded-3xl border border-white/20 shadow-lg overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-4 sm:px-6 py-4",children:[(0,i.jsxs)("h2",{className:"text-lg sm:text-xl font-bold text-white flex items-center",children:[(0,i.jsx)(U.A,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2"}),"Algoritma Performans Dashboard"]}),(0,i.jsx)("p",{className:"text-indigo-100 text-xs sm:text-sm mt-1",children:"Detaylı analiz ve karşılaştırma"})]}),(0,i.jsx)("div",{className:"border-b border-gray-200 overflow-x-auto",children:(0,i.jsx)("div",{className:"flex min-w-max",children:j.map(e=>(0,i.jsxs)("button",{onClick:()=>b(e.id),className:"flex items-center px-4 sm:px-6 py-3 sm:py-4 text-sm sm:text-base font-medium border-b-2 transition-colors whitespace-nowrap ".concat(g===e.id?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,i.jsx)(e.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:e.label}),(0,i.jsx)("span",{className:"sm:hidden",children:e.label.split(" ")[0]})]},e.id))})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:["overview"===g&&(0,i.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4 sm:p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)(Z.A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600"}),(0,i.jsx)("span",{className:"text-xs sm:text-sm text-green-700 bg-green-100 px-2 py-1 rounded-full font-medium",children:"En İyi"})]}),(0,i.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-green-800 mb-1",children:y.bestAlgorithm}),(0,i.jsxs)("div",{className:"text-sm text-green-600",children:[null==(t=y.bestEfficiency)?void 0:t.toFixed(1),"% verimlilik"]})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-2xl p-4 sm:p-6",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,i.jsx)(Q.A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600"})}),(0,i.jsxs)("div",{className:"text-xl sm:text-2xl font-bold text-blue-800 mb-1",children:[null==(a=y.totalExecutionTime)?void 0:a.toFixed(1),"s"]}),(0,i.jsx)("div",{className:"text-sm text-blue-600",children:"Toplam s\xfcre"})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 border border-purple-200 rounded-2xl p-4 sm:p-6 sm:col-span-2 lg:col-span-1",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,i.jsx)(u.A,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-600"})}),(0,i.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-purple-800 mb-1",children:(null==(l=y.algorithms)?void 0:l.length)||0}),(0,i.jsx)("div",{className:"text-sm text-purple-600",children:"Test edilen algoritma"})]})]}),f&&(0,i.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-2xl p-4 sm:p-6",children:[(0,i.jsxs)("h4",{className:"font-bold text-orange-800 mb-3 flex items-center text-base sm:text-lg",children:[(0,i.jsx)(p.A,{className:"w-5 h-5 mr-2"}),"Hibrit Analizi"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-orange-700",children:["+",null==(n=f.improvement)?void 0:n.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"text-xs sm:text-sm text-orange-600",children:"İyileştirme"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-lg sm:text-xl font-bold text-orange-700",children:(null==(r=f.stages)?void 0:r.length)||0}),(0,i.jsx)("div",{className:"text-xs sm:text-sm text-orange-600",children:"Aşama"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-orange-700",children:[null==(c=f.finalEfficiency)?void 0:c.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"text-xs sm:text-sm text-orange-600",children:"Nihai verimlilik"})]})]})]})]}),"comparison"===g&&(0,i.jsx)("div",{className:"space-y-4 sm:space-y-6",children:(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full min-w-[640px]",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,i.jsx)("th",{className:"text-left py-3 px-2 sm:px-4 text-sm sm:text-base font-medium text-gray-600",children:"Algoritma"}),(0,i.jsx)("th",{className:"text-center py-3 px-2 sm:px-4 text-sm sm:text-base font-medium text-gray-600",children:"Verimlilik"}),(0,i.jsx)("th",{className:"text-center py-3 px-2 sm:px-4 text-sm sm:text-base font-medium text-gray-600",children:"S\xfcre"}),(0,i.jsx)("th",{className:"text-center py-3 px-2 sm:px-4 text-sm sm:text-base font-medium text-gray-600",children:"Sıralama"})]})}),(0,i.jsx)("tbody",{children:null==(o=y.algorithms)?void 0:o.map((e,t)=>{var a,s;return(0,i.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,i.jsx)("td",{className:"py-3 px-2 sm:px-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(e.name===y.bestAlgorithm?"bg-green-500":"bg-gray-300")}),(0,i.jsx)("span",{className:"font-medium text-sm sm:text-base",children:e.name})]})}),(0,i.jsx)("td",{className:"text-center py-3 px-2 sm:px-4",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsxs)("span",{className:"font-bold text-sm sm:text-base",children:[null==(a=e.efficiency)?void 0:a.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"w-16 sm:w-20 bg-gray-200 rounded-full h-2 mt-1",children:(0,i.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(e.efficiency||0,"%")}})})]})}),(0,i.jsxs)("td",{className:"text-center py-3 px-2 sm:px-4 text-sm sm:text-base",children:[null==(s=e.executionTime)?void 0:s.toFixed(2),"s"]}),(0,i.jsx)("td",{className:"text-center py-3 px-2 sm:px-4",children:(0,i.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"),children:["#",t+1]})})]},t)})})]})})}),"convergence"===g&&(0,i.jsx)("div",{className:"space-y-4 sm:space-y-6",children:(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 sm:p-6",children:[(0,i.jsx)("h4",{className:"font-bold text-blue-800 mb-4 text-base sm:text-lg",children:"Yakınsama Analizi"}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:null==(d=y.algorithms)?void 0:d.slice(0,2).map((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,i.jsx)("h5",{className:"font-medium text-gray-800 mb-3 text-sm sm:text-base",children:e.name}),e.convergenceData&&e.convergenceData.length>0?(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-xs sm:text-sm text-gray-600",children:[(0,i.jsx)("span",{children:"İterasyon sayısı"}),(0,i.jsx)("span",{children:e.convergenceData.length})]}),(0,i.jsxs)("div",{className:"flex justify-between text-xs sm:text-sm text-gray-600",children:[(0,i.jsx)("span",{children:"Son iyileştirme"}),(0,i.jsxs)("span",{children:["#",e.convergenceData.length]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(Math.min(100,e.efficiency||0),"%")}})})]}):(0,i.jsx)("p",{className:"text-gray-500 text-xs sm:text-sm",children:"Yakınsama verisi mevcut değil"})]},t))})]})}),"performance"===g&&(0,i.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[f&&f.stages&&(0,i.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-2xl p-4 sm:p-6",children:[(0,i.jsx)("h4",{className:"font-bold text-purple-800 mb-4 text-base sm:text-lg",children:"Hibrit Performans"}),(0,i.jsx)("div",{className:"space-y-3",children:f.stages.map((e,t)=>{var a,s;return(0,i.jsx)("div",{className:"bg-white rounded-xl p-3 sm:p-4",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:(0,i.jsx)("span",{className:"text-purple-600 font-bold text-xs sm:text-sm",children:t+1})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-sm sm:text-base",children:e.algorithm}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:[null==(a=e.executionTime)?void 0:a.toFixed(2),"s"]})]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("span",{className:"font-bold text-purple-700 text-sm sm:text-base",children:[null==(s=e.efficiency)?void 0:s.toFixed(1),"%"]}),e.improvement&&(0,i.jsxs)("div",{className:"text-xs text-green-600",children:["+",e.improvement.toFixed(1),"%"]})]})]})},t)})}),(0,i.jsx)("div",{className:"mt-4 pt-4 border-t border-purple-200",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"font-medium text-purple-800 text-sm sm:text-base",children:"Toplam İyileştirme"}),(0,i.jsxs)("span",{className:"text-lg sm:text-xl font-bold text-purple-700",children:["+",null==(h=f.improvement)?void 0:h.toFixed(1),"%"]})]})})]}),(0,i.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4 sm:p-6",children:[(0,i.jsx)("h4",{className:"font-bold text-green-800 mb-4 text-base sm:text-lg",children:"\xd6neriler"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)(J.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"text-sm sm:text-base text-green-700",children:[y.bestAlgorithm," algoritması en iyi sonucu verdi"]})]}),f&&(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)(J.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"text-sm sm:text-base text-green-700",children:["Hibrit yaklaşım %",null==(m=f.improvement)?void 0:m.toFixed(1)," ek verimlilik sağladı"]})]}),(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)(J.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),(0,i.jsxs)("span",{className:"text-sm sm:text-base text-green-700",children:["Gelecek optimizasyonlar i\xe7in ",y.bestAlgorithm," tercih edilebilir"]})]})]})]})]})]})]})}function ee(e){let{cuttingInstructions:t,algorithmData:a}=e;if(!t||!t.instructions)return null;let{instructions:s,summary:l}=t,n=e=>{let t=Math.floor(e/60);return"".concat(t,"dk ").concat(e%60,"sn")};return(0,i.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl lg:rounded-3xl border border-white/20 shadow-lg overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 px-4 sm:px-6 py-4",children:[(0,i.jsx)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-white flex items-center",children:"✂️ KESİM TALİMATLARI"}),(0,i.jsx)("p",{className:"text-red-100 text-xs sm:text-sm mt-1",children:"Adım adım basit kesim rehberi - \xc7ocuk bile anlayacak kadar basit!"})]}),(0,i.jsx)("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-blue-50 to-cyan-50",children:(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-blue-800 mb-4",children:"\uD83D\uDCCB NE YAPACAKSIN?"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:[(0,i.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCE6"}),(0,i.jsx)("div",{className:"text-xl font-bold text-blue-600",children:l.totalBlocks}),(0,i.jsx)("div",{className:"text-sm text-blue-600",children:"Blok Keseceksin"})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:[(0,i.jsx)("div",{className:"text-3xl mb-2",children:"✂️"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-600",children:l.totalCuts}),(0,i.jsx)("div",{className:"text-sm text-red-600",children:"Kez Keseceksin"})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:[(0,i.jsx)("div",{className:"text-3xl mb-2",children:"⏰"}),(0,i.jsx)("div",{className:"text-xl font-bold text-green-600",children:n(l.estimatedTotalTime)}),(0,i.jsx)("div",{className:"text-sm text-green-600",children:"S\xfcrecek"})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:[(0,i.jsx)("div",{className:"text-3xl mb-2",children:"\uD83C\uDFAF"}),(0,i.jsx)("div",{className:"text-xl font-bold text-purple-600",children:"KOLAY"}),(0,i.jsx)("div",{className:"text-sm text-purple-600",children:"Sadece D\xfcz Kes"})]})]})]})}),(0,i.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,i.jsx)("div",{className:"space-y-8",children:s.map((e,t)=>(0,i.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl p-6 border-4 border-yellow-300",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCE6"}),(0,i.jsxs)("h3",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:["BLOK ",e.blockNumber]}),(0,i.jsx)("p",{className:"text-lg text-gray-700",children:e.stockLabel}),(0,i.jsxs)("div",{className:"inline-flex items-center mt-4 px-6 py-3 bg-red-500 text-white rounded-full text-xl font-bold",children:["✂️ ",e.totalCuts," KEZ KESECEKSİN"]})]}),(0,i.jsx)("div",{className:"space-y-6",children:e.steps.map((e,t)=>(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-4 border-gray-300",children:[(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("div",{className:"text-8xl mb-4",children:1===e.phase?"↔️":"↕️"}),(0,i.jsx)("div",{className:"inline-flex items-center px-8 py-4 rounded-full text-white text-2xl font-bold ".concat(1===e.phase?"bg-blue-500":"bg-green-500"),children:1===e.phase?"\xd6NCE YATAY KES":"SONRA DİKEY KES"}),(0,i.jsx)("p",{className:"text-lg text-gray-600 mt-3",children:1===e.phase?"Soldan sağa doğru \xe7izgi \xe7ek":"Yukarıdan aşağıya \xe7izgi \xe7ek"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.cuts.map((e,t)=>(0,i.jsxs)("div",{className:"p-6 rounded-xl text-center border-4 transform hover:scale-105 transition-transform ".concat("horizontal"===e.type?"bg-blue-100 border-blue-500":"bg-green-100 border-green-500"),children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"horizontal"===e.type?"↔️":"↕️"}),(0,i.jsxs)("div",{className:"text-3xl font-bold mb-3 text-gray-900",children:[e.position,"cm"]}),(0,i.jsx)("div",{className:"text-lg font-medium text-gray-700 mb-2",children:"horizontal"===e.type?"Yatay Kesim":"Dikey Kesim"}),(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full text-white text-xl font-bold ".concat("horizontal"===e.type?"bg-blue-500":"bg-green-500"),children:t+1})]},t))}),(0,i.jsxs)("div",{className:"mt-6 bg-yellow-100 border-4 border-yellow-400 rounded-xl p-4 text-center",children:[(0,i.jsx)("div",{className:"text-2xl mb-2",children:"⚠️"}),(0,i.jsx)("div",{className:"text-lg font-bold text-yellow-800",children:1===e.phase?"T\xdcM YATAY KESİMLERİ BİTİR!":"T\xdcM DİKEY KESİMLERİ BİTİR!"}),(0,i.jsx)("div",{className:"text-sm text-yellow-700 mt-1",children:1===e.phase?"Sonra dikey kesimlere ge\xe7":"Bu blok tamamlandı!"})]})]},t))}),(0,i.jsxs)("div",{className:"mt-8 bg-green-100 border-4 border-green-400 rounded-xl p-6 text-center",children:[(0,i.jsx)("div",{className:"text-4xl mb-3",children:"✅"}),(0,i.jsxs)("div",{className:"text-2xl font-bold text-green-800 mb-2",children:["BLOK ",e.blockNumber," TAMAMLANDı!"]}),(0,i.jsxs)("div",{className:"text-lg text-green-700",children:["⏱️ Tahmini S\xfcre: ",n(e.estimatedTime)]}),(0,i.jsxs)("div",{className:"text-base text-green-600 mt-2",children:["Toplam ",e.totalCuts," kesim yaptın"]})]})]},t))}),(0,i.jsx)("div",{className:"mt-8 bg-gradient-to-r from-red-100 to-pink-100 border-4 border-red-400 rounded-2xl p-6",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,i.jsx)("h4",{className:"text-3xl font-bold text-red-800 mb-6",children:"UNUTMA! \xd6NEMLİ KURALLAR"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"1️⃣"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-700 mb-2",children:"\xd6NCE YATAY"}),(0,i.jsx)("div",{className:"text-base text-red-600",children:"T\xfcm ↔️ kesimleri bitir"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"2️⃣"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-700 mb-2",children:"SONRA DİKEY"}),(0,i.jsx)("div",{className:"text-base text-red-600",children:"T\xfcm ↕️ kesimleri bitir"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"\uD83C\uDFAF"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-700 mb-2",children:"SADECE D\xdcZ"}),(0,i.jsx)("div",{className:"text-base text-red-600",children:"Bı\xe7ak d\xfcz gider, d\xf6nmez"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"✋"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-700 mb-2",children:"SIKICA TUT"}),(0,i.jsx)("div",{className:"text-base text-red-600",children:"Par\xe7alar hareket etmesin"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"\uD83D\uDCCF"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-700 mb-2",children:"\xd6L\xc7\xdc KONTROL"}),(0,i.jsx)("div",{className:"text-base text-red-600",children:"Keserken cm'leri kontrol et"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("div",{className:"text-5xl mb-3",children:"\uD83D\uDC0C"}),(0,i.jsx)("div",{className:"text-xl font-bold text-red-700 mb-2",children:"YAVAŞ YAP"}),(0,i.jsx)("div",{className:"text-base text-red-600",children:"Acele etme, dikkatli kes"})]})]})]})}),(0,i.jsxs)("div",{className:"mt-8 bg-gradient-to-r from-green-100 to-blue-100 border-4 border-green-400 rounded-2xl p-8 text-center",children:[(0,i.jsx)("div",{className:"text-8xl mb-4",children:"\uD83C\uDF89"}),(0,i.jsx)("h4",{className:"text-4xl font-bold text-green-800 mb-4",children:"TEBRIKLER!"}),(0,i.jsx)("p",{className:"text-xl text-green-700 mb-2",children:"T\xfcm kesimleri tamamladın!"}),(0,i.jsx)("p",{className:"text-lg text-green-600",children:"Artık par\xe7aların hazır ve kulıma uygun! \uD83C\uDFAF"})]})]})]})}var et=a(9022),ea=a(7924);function ei(e){let{onSelectMaterial:t}=e,[a,l]=(0,s.useState)([{id:"1",name:"PU S\xfcnger - Standard",density:25,cost:850,category:"foam",standardSizes:[{length:200,width:120,height:10,availability:"in_stock"},{length:240,width:240,height:100,availability:"in_stock"},{length:300,width:200,height:50,availability:"order"}],properties:{hardness:"Orta",color:"Beyaz",manufacturer:"FoamTech",grade:"A"},tags:["standard","mobilya","yastık"]}]),[n,r]=(0,s.useState)(""),[c,o]=(0,s.useState)("all"),d=a.filter(e=>{let t=e.name.toLowerCase().includes(n.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(n.toLowerCase())),a="all"===c||e.category===c;return t&&a});return(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[(0,i.jsx)("div",{className:"border-b border-gray-100 px-6 py-4",children:(0,i.jsxs)("h2",{className:"font-semibold text-gray-900 flex items-center",children:[(0,i.jsx)(et.A,{className:"w-5 h-5 text-blue-500 mr-2"}),"Malzeme K\xfct\xfcphanesi"]})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)(ea.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,i.jsx)("input",{type:"text",placeholder:"Malzeme ara...",value:n,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,i.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,i.jsx)("option",{value:"all",children:"T\xfcm Kategoriler"}),(0,i.jsx)("option",{value:"foam",children:"S\xfcnger"}),(0,i.jsx)("option",{value:"plastic",children:"Plastik"}),(0,i.jsx)("option",{value:"wood",children:"Ahşap"}),(0,i.jsx)("option",{value:"metal",children:"Metal"})]})]}),(0,i.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:d.map(e=>(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,i.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,i.jsxs)("span",{children:["Yoğunluk: ",e.density," kg/m\xb3"]}),(0,i.jsxs)("span",{children:["Fiyat: ₺",e.cost,"/m\xb3"]}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("foam"===e.category?"bg-blue-100 text-blue-800":"plastic"===e.category?"bg-green-100 text-green-800":"wood"===e.category?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.category})]})]})}),Object.keys(e.properties).length>0&&(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.properties).map(e=>{let[t,a]=e;return a&&(0,i.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:[t,": ",a]},t)})})}),e.tags.length>0&&(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,i.jsxs)("span",{className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded-full",children:["#",e]},e))})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Standart Boyutlar:"}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2",children:e.standardSizes.map((a,s)=>(0,i.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[(0,i.jsxs)("span",{className:"text-sm",children:[a.length,"\xd7",a.width,"\xd7",a.height,"cm"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("in_stock"===a.availability?"bg-green-100 text-green-800":"order"===a.availability?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"in_stock"===a.availability?"Stokta":"order"===a.availability?"Sipariş":"T\xfckendi"}),(0,i.jsx)("button",{onClick:()=>t(e,a),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs",children:"Kullan"})]})]},s))})]})]},e.id))}),0===d.length&&(0,i.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,i.jsx)(et.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,i.jsx)("p",{children:"Eşleşen malzeme bulunamadı"})]})]})]})}var es=a(95),el=a(7930),en=a(8136),er=a(4395),ec=a(8564);function eo(e){let{onSelectTemplate:t}=e,[a]=(0,s.useState)([{id:"furniture-sofa",name:"Klasik Koltuk Seti",description:"3 kişilik koltuk i\xe7in standart s\xfcnger par\xe7aları",category:"furniture",icon:es.A,pieces:[{label:"Oturma Y\xfczeyi",length:180,width:60,height:8,quantity:1,color:"#3B82F6"},{label:"Sırt Desteği",length:180,width:80,height:8,quantity:1,color:"#10B981"},{label:"Kol Desteği",length:60,width:25,height:15,quantity:2,color:"#F59E0B"},{label:"Yastık",length:50,width:50,height:12,quantity:3,color:"#EF4444"}],stockMaterials:[{label:"B\xfcy\xfck S\xfcnger Blok",length:200,width:100,height:20,quantity:2}],tags:["mobilya","oturma","s\xfcnger"],difficulty:"beginner",estimatedTime:"2-3 saat",efficiency:85},{id:"automotive-seat",name:"Otomobil Koltuk Sistemi",description:"Arabalar i\xe7in ergonomik koltuk par\xe7aları",category:"automotive",icon:el.A,pieces:[{label:"Ana Oturma",length:50,width:45,height:10,quantity:4,color:"#8B5CF6"},{label:"Sırt Desteği",length:50,width:60,height:8,quantity:4,color:"#EC4899"},{label:"Baş Desteği",length:25,width:20,height:8,quantity:4,color:"#06B6D4"},{label:"Yan Destek",length:40,width:15,height:12,quantity:8,color:"#84CC16"}],stockMaterials:[{label:"Otomotiv S\xfcnger",length:120,width:80,height:15,quantity:3}],tags:["otomotiv","koltuk","ergonomik"],difficulty:"intermediate",estimatedTime:"4-5 saat",efficiency:78},{id:"construction-insulation",name:"Bina İzolasyon Sistemi",description:"Duvar ve tavan izolasyonu i\xe7in k\xf6p\xfck paneller",category:"construction",icon:en.A,pieces:[{label:"Duvar Paneli",length:120,width:60,height:5,quantity:20,color:"#F97316"},{label:"Tavan Paneli",length:60,width:60,height:8,quantity:15,color:"#EAB308"},{label:"K\xf6şe Profili",length:100,width:10,height:5,quantity:10,color:"#22C55E"}],stockMaterials:[{label:"İzolasyon Bloğu",length:240,width:120,height:10,quantity:5}],tags:["inşaat","izolasyon","panel"],difficulty:"advanced",estimatedTime:"6-8 saat",efficiency:92},{id:"packaging-custom",name:"\xd6zel Ambalaj \xc7\xf6z\xfcm\xfc",description:"Kırılgan \xfcr\xfcnler i\xe7in koruyucu k\xf6p\xfck par\xe7alar",category:"custom",icon:l.A,pieces:[{label:"Alt Koruma",length:30,width:30,height:3,quantity:10,color:"#6366F1"},{label:"\xdcst Koruma",length:30,width:30,height:3,quantity:10,color:"#8B5CF6"},{label:"Yan Koruma",length:30,width:10,height:15,quantity:40,color:"#EC4899"},{label:"Ara Seperat\xf6r",length:28,width:28,height:2,quantity:20,color:"#06B6D4"}],stockMaterials:[{label:"Koruyucu K\xf6p\xfck",length:100,width:100,height:20,quantity:2}],tags:["ambalaj","koruma","lojistik"],difficulty:"intermediate",estimatedTime:"3-4 saat",efficiency:88}]),[n,r]=(0,s.useState)("all"),[c,o]=(0,s.useState)("all"),d=a.filter(e=>{let t="all"===n||e.category===n,a="all"===c||e.difficulty===c;return t&&a}),h=e=>{switch(e){case"furniture":return"bg-blue-100 text-blue-800";case"automotive":return"bg-red-100 text-red-800";case"construction":return"bg-green-100 text-green-800";case"custom":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},m=e=>{switch(e){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=e=>{switch(e){case"beginner":return"Başlangı\xe7";case"intermediate":return"Orta";case"advanced":return"İleri";default:return"Bilinmeyen"}};return(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",children:[(0,i.jsxs)("div",{className:"border-b border-gray-100 px-6 py-4",children:[(0,i.jsxs)("h2",{className:"font-semibold text-gray-900 flex items-center",children:[(0,i.jsx)(er.A,{className:"w-5 h-5 text-purple-500 mr-2"}),"Proje Şablonları"]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Hazır projelerle hızla başlayın"})]}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,i.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,i.jsx)("option",{value:"all",children:"T\xfcm Kategoriler"}),(0,i.jsx)("option",{value:"furniture",children:"Mobilya"}),(0,i.jsx)("option",{value:"automotive",children:"Otomotiv"}),(0,i.jsx)("option",{value:"construction",children:"İnşaat"}),(0,i.jsx)("option",{value:"custom",children:"\xd6zel"})]}),(0,i.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,i.jsx)("option",{value:"all",children:"T\xfcm Seviyeler"}),(0,i.jsx)("option",{value:"beginner",children:"Başlangı\xe7"}),(0,i.jsx)("option",{value:"intermediate",children:"Orta"}),(0,i.jsx)("option",{value:"advanced",children:"İleri"})]})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(e=>{let a=e.icon;return(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-all duration-200 hover:border-purple-300",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,i.jsx)(a,{className:"w-5 h-5 text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,i.jsxs)("div",{className:"flex items-center text-yellow-500",children:[(0,i.jsx)(ec.A,{className:"w-4 h-4 fill-current"}),(0,i.jsxs)("span",{className:"text-xs ml-1",children:[e.efficiency,"%"]})]})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(h(e.category)),children:"furniture"===e.category?"Mobilya":"automotive"===e.category?"Otomotiv":"construction"===e.category?"İnşaat":"\xd6zel"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(m(e.difficulty)),children:x(e.difficulty)}),(0,i.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:e.estimatedTime})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[e.pieces.length," farklı par\xe7a, toplam ",e.pieces.reduce((e,t)=>e+t.quantity,0)," adet"]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.pieces.slice(0,4).map((e,t)=>(0,i.jsxs)("div",{className:"text-xs bg-gray-50 px-2 py-1 rounded",title:e.label,children:[e.label.substring(0,10),"..."]},t)),e.pieces.length>4&&(0,i.jsxs)("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:["+",e.pieces.length-4," daha"]})]})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,i.jsxs)("span",{className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded-full",children:["#",e]},e))})}),(0,i.jsxs)("button",{onClick:()=>t(e),className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg flex items-center justify-center font-medium transition-colors",children:[(0,i.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Şablonu Kullan"]})]},e.id)})}),0===d.length&&(0,i.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,i.jsx)(er.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,i.jsx)("p",{className:"text-lg font-medium mb-2",children:"Şablon bulunamadı"}),(0,i.jsx)("p",{className:"text-sm",children:"Filtre kriterlerinizi değiştirerek tekrar deneyin"})]})]})]})}var ed=a(1243),eh=a(646);function em(e){let{optimizationResult:t,pieces:a,stockFoams:n,onClose:r}=e,[c,o]=(0,s.useState)("overview"),[h,m]=(0,s.useState)("pdf"),x=(0,s.useMemo)(()=>{if(!t)return null;let e=n.reduce((e,t)=>e+t.length*t.width*t.height*t.quantity,0),i=a.reduce((e,t)=>e+t.length*t.width*t.height*t.quantity,0),s=t.layouts.length,l=n.reduce((e,t)=>e+t.quantity,0),r=t.layouts.reduce((e,t)=>e+t.pieces.length,0),c=t.layouts.reduce((e,t)=>e+t.utilization,0)/t.layouts.length,o=n.reduce((e,a)=>e+t.layouts.filter(e=>e.stockId===a.id).length*(a.price||0),0),d=o*(t.totalWaste/100),h=t.efficiency,m=2.5*r,x=15*s,g=m+x;return{totalStockVolume:e/1e3,totalPieceVolume:i/1e3,usedStocks:s,totalStocks:l,stockUtilization:s/l*100,cuttingComplexity:r,averageUtilization:c,materialCost:o,wasteCost:d,netCost:o-d,efficiencyScore:h,cuttingTime:m,setupTime:x,totalTime:g,piecesPerHour:a.reduce((e,t)=>e+t.quantity,0)/(g/60),wasteVolume:e*t.totalWaste/100/1e3}},[t,a,n]),u=()=>{if(!t)return[];let e=[];return t.layouts.forEach((t,i)=>{let s=n.find(e=>e.id===t.stockId);s&&(e.push({type:"setup",step:e.length+1,title:"".concat(s.label," Hazırlığı"),description:"".concat(s.length,"\xd7").concat(s.width,"\xd7").concat(s.height,"cm boyutlarındaki malzemeyi kesim masasına yerleştirin"),time:"15 dakika",tools:["\xd6l\xe7\xfc aleti","İşaretleme kalemi","Kesim bı\xe7ağı"],safety:["Eldiven takın","G\xf6zl\xfck kullanın","\xc7alışma alanını temizleyin"]}),t.pieces.forEach((i,s)=>{let l=a.find(e=>i.pieceId.startsWith(e.id));l&&e.push({type:"cut",step:e.length+1,title:"".concat(l.label," Kesimi"),description:"Pozisyon: X=".concat((i.x/10).toFixed(1),"cm, Y=").concat((i.y/10).toFixed(1),"cm, Z=").concat((i.z/10).toFixed(1),"cm"),dimensions:"".concat(l.length,"\xd7").concat(l.width,"\xd7").concat(l.height,"cm"),time:"2.5 dakika",rotated:i.rotated||!1,color:l.color,sequence:s+1,totalInLayout:t.pieces.length})}),e.push({type:"quality",step:e.length+1,title:"Kalite Kontrol\xfc",description:"Blok ".concat(i+1," i\xe7in t\xfcm par\xe7aları kontrol edin"),time:"5 dakika",checkpoints:["Boyut doğruluğu","Y\xfczey kalitesi","Kenar d\xfczg\xfcnl\xfcğ\xfc","Etiketleme"]}))}),e};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 modal-backdrop",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col modal-content",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center",children:(0,i.jsx)(y.A,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gelişmiş Rapor Sistemi"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Detaylı analiz ve kesim talimatları"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,i.jsx)("option",{value:"pdf",children:"PDF Raporu"}),(0,i.jsx)("option",{value:"excel",children:"Excel Dosyası"}),(0,i.jsx)("option",{value:"csv",children:"CSV Verileri"})]}),(0,i.jsxs)("button",{onClick:()=>{if(!t||!x)return;let e=u(),i='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="utf-8">\n        <title>Gelişmiş S\xfcnger Kesim Raporu</title>\n        <style>\n          @page { margin: 15mm; size: A4; }\n          body { \n            font-family: \'Segoe UI\', Tahoma, Geneva, Verdana, sans-serif; \n            line-height: 1.6; \n            color: #333;\n            background: #f8f9fa;\n          }\n          .container { max-width: 100%; margin: 0 auto; background: white; padding: 20px; }\n          .header { \n            text-align: center; \n            border-bottom: 3px solid #3b82f6; \n            padding-bottom: 20px; \n            margin-bottom: 30px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            margin: -20px -20px 30px -20px;\n            padding: 30px 20px 20px 20px;\n          }\n          .logo { max-width: 80px; height: auto; margin-bottom: 10px; }\n          .section { margin-bottom: 30px; page-break-inside: avoid; }\n          .section h2 { \n            color: #1e293b; \n            border-bottom: 2px solid #e2e8f0; \n            padding-bottom: 10px;\n            font-size: 1.5em;\n            display: flex;\n            align-items: center;\n          }\n          .icon { width: 20px; height: 20px; margin-right: 10px; }\n          .stats-grid { \n            display: grid; \n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); \n            gap: 20px; \n            margin: 20px 0; \n          }\n          .stat-card { \n            background: #f8fafc; \n            padding: 20px; \n            border-radius: 10px; \n            text-align: center;\n            border-left: 4px solid #3b82f6;\n          }\n          .stat-value { \n            font-size: 2em; \n            font-weight: bold; \n            color: #3b82f6; \n            margin-bottom: 5px;\n          }\n          .stat-label { \n            color: #64748b; \n            font-size: 0.9em; \n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n          }\n          .cutting-instruction {\n            background: #ffffff;\n            border: 1px solid #e2e8f0;\n            border-radius: 8px;\n            padding: 15px;\n            margin-bottom: 15px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n          }\n          .instruction-header {\n            display: flex;\n            align-items: center;\n            margin-bottom: 10px;\n            font-weight: bold;\n            color: #1e293b;\n          }\n          .instruction-step {\n            background: #3b82f6;\n            color: white;\n            border-radius: 50%;\n            width: 30px;\n            height: 30px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin-right: 15px;\n            font-size: 0.9em;\n          }\n          .piece-color {\n            width: 20px;\n            height: 20px;\n            border-radius: 4px;\n            margin-right: 10px;\n            border: 1px solid #ccc;\n          }\n          .warning-box {\n            background: #fef3c7;\n            border: 1px solid #f59e0b;\n            border-radius: 6px;\n            padding: 15px;\n            margin: 15px 0;\n          }\n          .success-box {\n            background: #ecfdf5;\n            border: 1px solid #10b981;\n            border-radius: 6px;\n            padding: 15px;\n            margin: 15px 0;\n          }\n          table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n          th, td { \n            border: 1px solid #e2e8f0; \n            padding: 12px; \n            text-align: left;\n            font-size: 0.9em;\n          }\n          th { \n            background: #f8fafc; \n            font-weight: 600;\n            color: #374151;\n          }\n          .efficiency-high { color: #10b981; font-weight: bold; }\n          .efficiency-medium { color: #f59e0b; font-weight: bold; }\n          .efficiency-low { color: #ef4444; font-weight: bold; }\n          .page-break { page-break-before: always; }\n          .footer {\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid #e2e8f0;\n            text-align: center;\n            color: #64748b;\n            font-size: 0.8em;\n          }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="header">\n            <h1>Gelişmiş S\xfcnger Kesim Raporu</h1>\n            <p>Oluşturulma: '.concat(new Date().toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),'</p>\n            <p>AI Destekli Optimizasyon Sonu\xe7ları</p>\n          </div>\n\n          \x3c!-- Executive Summary --\x3e\n          <div class="section">\n            <h2>\uD83D\uDCCA Y\xf6netici \xd6zeti</h2>\n            <div class="stats-grid">\n              <div class="stat-card">\n                <div class="stat-value">').concat(x.efficiencyScore.toFixed(1),'%</div>\n                <div class="stat-label">Toplam Verimlilik</div>\n              </div>\n              <div class="stat-card">\n                <div class="stat-value">').concat(x.wasteVolume.toFixed(1),'L</div>\n                <div class="stat-label">Fire Miktarı</div>\n              </div>\n              <div class="stat-card">\n                <div class="stat-value">').concat(x.usedStocks,"/").concat(x.totalStocks,'</div>\n                <div class="stat-label">Kullanılan Blok</div>\n              </div>\n              <div class="stat-card">\n                <div class="stat-value">').concat(Math.round(x.totalTime),' dk</div>\n                <div class="stat-label">Tahmini S\xfcre</div>\n              </div>\n            </div>\n            \n            <div class="').concat(x.efficiencyScore>=90?"success-box":(x.efficiencyScore,"warning-box"),'">\n              <strong>Performans Değerlendirmesi:</strong> \n              ').concat(x.efficiencyScore>=90?"M\xfckemmel - \xc7ok y\xfcksek verimlilik!":x.efficiencyScore>=70?"İyi - Kabul edilebilir verimlilik seviyesi":"Geliştirilmeli - D\xfcş\xfck verimlilik, par\xe7a boyutlarını g\xf6zden ge\xe7irin",'\n            </div>\n          </div>\n\n          \x3c!-- Economic Analysis --\x3e\n          <div class="section">\n            <h2>\uD83D\uDCB0 Ekonomik Analiz</h2>\n            <table>\n              <tr>\n                <th>Maliyet Kalemi</th>\n                <th>Miktar</th>\n                <th>Birim</th>\n                <th>Toplam</th>\n              </tr>\n              <tr>\n                <td>Ham Malzeme</td>\n                <td>').concat(x.totalStockVolume.toFixed(1),"</td>\n                <td>₺/L</td>\n                <td>₺").concat(x.materialCost.toFixed(2),"</td>\n              </tr>\n              <tr>\n                <td>Fire Maliyeti</td>\n                <td>").concat(x.wasteVolume.toFixed(1),'</td>\n                <td>₺/L</td>\n                <td class="efficiency-low">₺').concat(x.wasteCost.toFixed(2),"</td>\n              </tr>\n              <tr>\n                <td>İş\xe7ilik (").concat(Math.round(x.totalTime)," dk)</td>\n                <td>").concat((x.totalTime/60).toFixed(1),"</td>\n                <td>₺/saat</td>\n                <td>₺").concat((x.totalTime/60*50).toFixed(2),'</td>\n              </tr>\n              <tr style="background: #f8fafc; font-weight: bold;">\n                <td>TOPLAM MALİYET</td>\n                <td>-</td>\n                <td>-</td>\n                <td class="efficiency-high">₺').concat((x.materialCost+x.totalTime/60*50).toFixed(2),'</td>\n              </tr>\n            </table>\n          </div>\n\n          \x3c!-- Production Plan --\x3e\n          <div class="section page-break">\n            <h2>\uD83D\uDD04 \xdcretim Planı</h2>\n            <p><strong>Tahmini \xdcretim S\xfcresi:</strong> ').concat(Math.round(x.totalTime)," dakika (").concat((x.totalTime/60).toFixed(1)," saat)</p>\n            <p><strong>Saatlik \xdcretim:</strong> ").concat(x.piecesPerHour.toFixed(1)," par\xe7a/saat</p>\n            <p><strong>Kesim Karmaşıklığı:</strong> ").concat(x.cuttingComplexity,' farklı kesim</p>\n            \n            <h3>⚠️ G\xfcvenlik Uyarıları</h3>\n            <ul>\n              <li>Kesim işlemlerinde daima koruyucu eldiven kullanın</li>\n              <li>Keskin bı\xe7akları g\xfcvenli şekilde saklayın</li>\n              <li>\xc7alışma alanını temiz ve d\xfczenli tutun</li>\n              <li>Havalandırmaya dikkat edin</li>\n            </ul>\n          </div>\n\n          \x3c!-- Cutting Instructions --\x3e\n          <div class="section">\n            <h2>✂️ Detaylı Kesim Talimatları</h2>\n            ').concat(e.map(e=>'\n              <div class="cutting-instruction">\n                <div class="instruction-header">\n                  <div class="instruction-step">'.concat(e.step,"</div>\n                  <div>\n                    <strong>").concat(e.title,"</strong>\n                    ").concat(e.time?'<span style="color: #64748b; margin-left: 10px;">⏱️ '.concat(e.time,"</span>"):"","\n                  </div>\n                  ").concat(e.color?'<div class="piece-color" style="background-color: '.concat(e.color,'"></div>'):"","\n                </div>\n                <p>").concat(e.description,"</p>\n                ").concat(e.dimensions?"<p><strong>Boyutlar:</strong> ".concat(e.dimensions,"</p>"):"","\n                ").concat(e.rotated?'<p><span style="color: #f59e0b;">⚠️ Bu par\xe7a d\xf6nd\xfcr\xfclm\xfcş konumda</span></p>':"","\n                ").concat(e.tools?"<p><strong>Gerekli Ara\xe7lar:</strong> ".concat(e.tools.join(", "),"</p>"):"","\n                ").concat(e.safety?"<p><strong>G\xfcvenlik:</strong> ".concat(e.safety.join(", "),"</p>"):"","\n                ").concat(e.checkpoints?"\n                  <p><strong>Kontrol Noktaları:</strong></p>\n                  <ul>".concat(e.checkpoints.map(e=>"<li>".concat(e,"</li>")).join(""),"</ul>\n                "):"","\n              </div>\n            ")).join(""),'\n          </div>\n\n          \x3c!-- Material Details --\x3e\n          <div class="section page-break">\n            <h2>\uD83D\uDCE6 Malzeme Detayları</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Malzeme</th>\n                  <th>Boyutlar (cm)</th>\n                  <th>Adet</th>\n                  <th>Hacim</th>\n                  <th>Kullanım</th>\n                  <th>Verimlilik</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(t.layouts.map(e=>{let t=n.find(t=>t.id===e.stockId);return t?"\n                    <tr>\n                      <td>".concat(t.label,"</td>\n                      <td>").concat(t.length,"\xd7").concat(t.width,"\xd7").concat(t.height,"</td>\n                      <td>1</td>\n                      <td>").concat((t.length*t.width*t.height/1e3).toFixed(1),"L</td>\n                      <td>").concat(e.pieces.length,' par\xe7a</td>\n                      <td class="').concat(e.utilization>=80?"efficiency-high":e.utilization>=60?"efficiency-medium":"efficiency-low",'">').concat(e.utilization.toFixed(1),"%</td>\n                    </tr>\n                  "):""}).join(""),'\n              </tbody>\n            </table>\n          </div>\n\n          \x3c!-- Piece Details --\x3e\n          <div class="section">\n            <h2>\uD83D\uDD37 Par\xe7a Detayları</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Par\xe7a Adı</th>\n                  <th>Boyutlar (cm)</th>\n                  <th>Adet</th>\n                  <th>Birim Hacim</th>\n                  <th>Toplam Hacim</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(a.map(e=>'\n                  <tr>\n                    <td>\n                      <div style="display: flex; align-items: center;">\n                        <div class="piece-color" style="background-color: '.concat(e.color,'"></div>\n                        ').concat(e.label,"\n                      </div>\n                    </td>\n                    <td>").concat(e.length,"\xd7").concat(e.width,"\xd7").concat(e.height,"</td>\n                    <td>").concat(e.quantity,"</td>\n                    <td>").concat((e.length*e.width*e.height/1e3).toFixed(3),"L</td>\n                    <td>").concat((e.length*e.width*e.height*e.quantity/1e3).toFixed(1),"L</td>\n                  </tr>\n                ")).join(""),'\n              </tbody>\n            </table>\n          </div>\n\n          <div class="footer">\n            <p>Bu rapor FoamCut Pro v2.0 ile AI destekli optimizasyon algoritmaları kullanılarak oluşturulmuştur.</p>\n            <p>\uD83E\uDD16 Generated with Claude AI • \xa9 2024 FoamCut Optimizer</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    '),s=window.open("","_blank");s&&(s.document.write(i),s.document.close(),s.print())},className:"btn btn-primary text-sm",children:[(0,i.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Rapor İndir"]}),(0,i.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})]}),(0,i.jsx)("div",{className:"border-b border-gray-200",children:(0,i.jsx)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[{key:"overview",label:"Genel Bakış",icon:U.A},{key:"cutting",label:"Kesim Talimatları",icon:d.A},{key:"economics",label:"Ekonomik Analiz",icon:_.A},{key:"detailed",label:"Detaylı Rapor",icon:b.A}].map(e=>(0,i.jsxs)("button",{onClick:()=>o(e.key),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(c===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,i.jsx)(e.icon,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:e.label})]},e.key))})}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(()=>{if(!x)return null;switch(c){case"overview":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,i.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(X.A,{className:"w-8 h-8 text-blue-600"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[x.efficiencyScore.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"text-sm text-blue-600",children:"Verimlilik"})]})]})}),(0,i.jsx)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(l.A,{className:"w-8 h-8 text-green-600"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:[x.usedStocks,"/",x.totalStocks]}),(0,i.jsx)("div",{className:"text-sm text-green-600",children:"Kullanılan Blok"})]})]})}),(0,i.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(ed.A,{className:"w-8 h-8 text-yellow-600"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-yellow-900",children:[x.wasteVolume.toFixed(1),"L"]}),(0,i.jsx)("div",{className:"text-sm text-yellow-600",children:"Fire Miktarı"})]})]})}),(0,i.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(Q.A,{className:"w-8 h-8 text-purple-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:Math.round(x.totalTime)}),(0,i.jsx)("div",{className:"text-sm text-purple-600",children:"Dakika"})]})]})})]}),(0,i.jsxs)("div",{className:"card-elevated p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,i.jsx)(U.A,{className:"w-5 h-5 mr-2 text-blue-600"}),"Performans Analizi"]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:"Malzeme Verimliliği"}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[x.efficiencyScore.toFixed(1),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(x.efficiencyScore,"%")}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:"Stok Kullanım Oranı"}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[x.stockUtilization.toFixed(1),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(x.stockUtilization,"%")}})})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:"\xdcretim Hızı"}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[x.piecesPerHour.toFixed(1)," par\xe7a/saat"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(2*x.piecesPerHour,100),"%")}})})]})]})]}),(0,i.jsxs)("div",{className:"card-elevated p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,i.jsx)(g.A,{className:"w-5 h-5 mr-2 text-green-600"}),"Ekonomik \xd6zet"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["₺",x.materialCost.toFixed(2)]}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Malzeme Maliyeti"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["₺",x.wasteCost.toFixed(2)]}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Fire Maliyeti"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["₺",(x.totalTime/60*50).toFixed(2)]}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"İş\xe7ilik Maliyeti"})]})]})]})]});case"cutting":let e=u();return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(d.A,{className:"w-6 h-6 text-blue-600"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-900",children:"Kesim Talimatları"}),(0,i.jsxs)("p",{className:"text-sm text-blue-700",children:["Toplam ",e.length," adım • Tahmini s\xfcre: ",Math.round(x.totalTime)," dakika"]})]})]})}),(0,i.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map((e,t)=>(0,i.jsx)("div",{className:"card p-4 border-l-4 border-blue-500",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:e.step}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900",children:e.title}),e.time&&(0,i.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["⏱️ ",e.time]}),e.color&&(0,i.jsx)("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:e.color}})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),e.dimensions&&(0,i.jsxs)("p",{className:"text-sm font-medium text-gray-800",children:["\uD83D\uDCCF ",e.dimensions]}),e.rotated&&(0,i.jsx)("div",{className:"bg-yellow-50 text-yellow-800 text-xs p-2 rounded mt-2",children:"⚠️ Bu par\xe7a d\xf6nd\xfcr\xfclm\xfcş konumda kesim yapılacak"}),e.tools&&(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Gerekli Ara\xe7lar: "}),(0,i.jsx)("span",{className:"text-xs text-gray-600",children:e.tools.join(", ")})]}),e.checkpoints&&(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Kontrol Noktaları:"}),(0,i.jsx)("ul",{className:"text-xs text-gray-600 mt-1",children:e.checkpoints.map((e,t)=>(0,i.jsxs)("li",{children:["• ",e]},t))})]})]})]})},t))})]});case"economics":return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"card-elevated p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCB0 Detaylı Maliyet Analizi"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,i.jsx)("span",{className:"font-medium",children:"Ham Malzeme"}),(0,i.jsxs)("span",{className:"font-bold text-green-600",children:["₺",x.materialCost.toFixed(2)]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,i.jsxs)("span",{className:"font-medium",children:["Fire Maliyeti (",t.totalWaste.toFixed(1),"%)"]}),(0,i.jsxs)("span",{className:"font-bold text-red-600",children:["₺",x.wasteCost.toFixed(2)]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,i.jsxs)("span",{className:"font-medium",children:["İş\xe7ilik (",(x.totalTime/60).toFixed(1)," saat)"]}),(0,i.jsxs)("span",{className:"font-bold text-blue-600",children:["₺",(x.totalTime/60*50).toFixed(2)]})]}),(0,i.jsx)("div",{className:"border-t pt-3",children:(0,i.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded font-bold",children:[(0,i.jsx)("span",{children:"TOPLAM MALİYET"}),(0,i.jsxs)("span",{className:"text-blue-600",children:["₺",(x.materialCost+x.totalTime/60*50).toFixed(2)]})]})})]})]}),(0,i.jsxs)("div",{className:"card-elevated p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCA1 Tasarruf Fırsatları"}),(0,i.jsxs)("div",{className:"space-y-3",children:[x.efficiencyScore<80&&(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)(ed.A,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-yellow-800",children:"D\xfcş\xfck Verimlilik"}),(0,i.jsxs)("p",{className:"text-sm text-yellow-700",children:["Verimlilik %",x.efficiencyScore.toFixed(1)," seviyesinde. Par\xe7a boyutlarını optimize ederek ₺",(.5*x.wasteCost).toFixed(2)," tasarruf sağlayabilirsiniz."]})]})]})}),x.stockUtilization<100&&(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)(l.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-blue-800",children:"Fazla Stok"}),(0,i.jsxs)("p",{className:"text-sm text-blue-700",children:[x.totalStocks-x.usedStocks," blok kullanılmadı. Daha b\xfcy\xfck par\xe7alar ekleyerek stok kullanımını artırabilirsiniz."]})]})]})}),(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)(eh.A,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-green-800",children:"Optimizasyon Başarılı"}),(0,i.jsx)("p",{className:"text-sm text-green-700",children:"Mevcut tasarım dengeli ve verimli. \xdcretim planınız uygulanabilir durumda."})]})]})})]})]})]});case"detailed":return(0,i.jsx)("div",{className:"space-y-6",children:(0,i.jsxs)("div",{className:"card-elevated p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCE6 Blok Bazında Analiz"}),(0,i.jsx)("div",{className:"space-y-4",children:t.layouts.map((e,t)=>{let s=n.find(t=>t.id===e.stockId);return s?(0,i.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,i.jsxs)("h4",{className:"font-medium",children:["Blok ",t+1,": ",s.label]}),(0,i.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(e.utilization>=80?"bg-green-100 text-green-800":e.utilization>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[e.utilization.toFixed(1),"% verimlilik"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Boyutlar:"}),(0,i.jsx)("br",{}),(0,i.jsxs)("span",{className:"font-medium",children:[s.length,"\xd7",s.width,"\xd7",s.height,"cm"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Hacim:"}),(0,i.jsx)("br",{}),(0,i.jsxs)("span",{className:"font-medium",children:[(s.length*s.width*s.height/1e3).toFixed(1),"L"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Par\xe7a Sayısı:"}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"font-medium",children:e.pieces.length})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Fire:"}),(0,i.jsx)("br",{}),(0,i.jsxs)("span",{className:"font-medium",children:[(100-e.utilization).toFixed(1),"%"]})]})]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium mb-2",children:"Yerleştirilen Par\xe7alar:"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:e.pieces.map((e,t)=>{let s=a.find(t=>e.pieceId.startsWith(t.id));return s?(0,i.jsxs)("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"w-3 h-3 rounded border",style:{backgroundColor:s.color}}),(0,i.jsx)("span",{className:"flex-1",children:s.label}),(0,i.jsxs)("span",{className:"text-gray-500",children:["(",(e.x/10).toFixed(1),", ",(e.y/10).toFixed(1),", ",(e.z/10).toFixed(1),")"]}),e.rotated&&(0,i.jsx)("span",{className:"text-yellow-600",children:"↻"})]},t):null})})]})]},t):null})})]})});default:return null}})()})]})})}function ex(){let[e,t]=(0,s.useState)([{id:"1",length:30,width:40,height:20,quantity:2,label:"Par\xe7a A",color:"#3B82F6"},{id:"2",length:40,width:90,height:10,quantity:4,label:"Par\xe7a B",color:"#10B981"},{id:"3",length:50,width:30,height:20,quantity:1,label:"Par\xe7a C",color:"#F59E0B"},{id:"4",length:100,width:90,height:7.5,quantity:6,label:"Par\xe7a D",color:"#EF4444"},{id:"5",length:60,width:40,height:30,quantity:1,label:"Par\xe7a E",color:"#8B5CF6"}]),[a,j]=(0,s.useState)([{id:"stock1",length:240,width:240,height:100,quantity:1,label:"B\xfcy\xfck S\xfcnger Blok"}]),[v,N]=(0,s.useState)(null),[w,k]=(0,s.useState)(!1),[z,A]=(0,s.useState)(null),[D,C]=(0,s.useState)(null),[F,M]=(0,s.useState)({length:"",width:"",height:"",quantity:"",label:""}),[S,P]=(0,s.useState)(!1),[T,I]=(0,s.useState)(!1),[B,E]=(0,s.useState)(!1),[q,K]=(0,s.useState)({length:"",width:"",height:"",quantity:"1",label:"Par\xe7a"}),[R,V]=(0,s.useState)({length:"",width:"",height:"",quantity:"1",label:"S\xfcnger Blok"}),[Y,U]=(0,s.useState)({currentAlgorithm:"",progress:0,stage:"",completed:0,total:0}),_=async()=>{if(0===e.length)return void alert("\xd6nce par\xe7a ekleyin!");console.log("Maksimizasyon başlıyor..."),k(!0),A("Maksimum adetler hesaplanıyor...");try{let i=a.reduce((e,t)=>e+t.length*t.width*t.height*t.quantity,0);console.log("Toplam ham malzeme hacmi:",i,"cm\xb3");let s=e.reduce((e,t)=>e+t.length*t.width*t.height*t.quantity,0);if(console.log("Mevcut par\xe7alar toplam hacmi:",s,"cm\xb3"),s>=i){A("Mevcut par\xe7alar zaten t\xfcm bloklara sığmıyor! Par\xe7a adetlerini azaltın."),k(!1);return}let l=i-s;console.log("Kalan hacim:",l,"cm\xb3");let n=[...e.map(t=>({...t,unitVolume:t.length*t.width*t.height,index:e.findIndex(e=>e.id===t.id)}))].sort((e,t)=>e.unitVolume-t.unitVolume),r=[...e],c=0;for(let e of n){let t=l-c,a=Math.floor(t/e.unitVolume);if(console.log("".concat(e.label,": Unit hacim ").concat(e.unitVolume,", maksimum ek adet: ").concat(a)),a>0){let t=r.findIndex(t=>t.id===e.id);if(-1!==t){let i=r[t].quantity+a;r[t]={...r[t],quantity:i},c+=a*e.unitVolume,console.log("".concat(e.label," g\xfcncellendi: ").concat(e.quantity," -> ").concat(i))}}}if(r.some((t,a)=>t.quantity!==e[a].quantity)){let e=r.reduce((e,t)=>e+t.length*t.width*t.height*t.quantity,0),a=(e/i*100).toFixed(1);console.log("Maksimizasyon tamamlandı:",{öncekiToplam:s,yeniToplam:e,verimlilik:a+"%"}),t(r),A("Par\xe7alar maksimize edildi! Toplam verimlilik: %".concat(a))}else console.log("Par\xe7alar zaten maksimum seviyede"),A("Par\xe7alar zaten maksimum seviyede! Daha fazla eklenemez.")}catch(e){console.error("Maksimizasyon hatası:",e),A("Maksimizasyon sırasında hata oluştu: "+e.message)}finally{k(!1)}};(0,s.useEffect)(()=>{if(z){let e=setTimeout(()=>A(null),5e3);return()=>clearTimeout(e)}},[z]);let X=async()=>{if(0!==e.length){k(!0),A("Par\xe7alar maksimize ediliyor ve optimize ediliyor...");try{await _(),setTimeout(async()=>{try{let t=e.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})),i=a.map(e=>({...e,length:10*e.length,width:10*e.width,height:10*e.height})),s=new L,l=await s.optimize(t,i);N(l),A("✅ Optimizasyon tamamlandı! Verimlilik: ".concat(l.efficiency.toFixed(1),"%"))}catch(e){console.error("Optimizasyon hatası:",e),A("Optimizasyon sırasında hata oluştu: "+e.message)}finally{k(!1)}},500)}catch(e){console.error("Maksimizasyon hatası:",e),A("Maksimizasyon sırasında hata oluştu: "+e.message),k(!1)}}},Z=async()=>{if(0!==e.length){k(!0),A("\uD83D\uDD2A Par\xe7alar maksimize ediliyor ve ger\xe7ek makine kısıtlamalarıyla optimize ediliyor...");try{await _(),setTimeout(async()=>{try{let t=new W(e,a),i=await t.optimize();N(i),A("\uD83D\uDD2A Ger\xe7ek Kesim: ".concat(i.efficiency.toFixed(1),"% verimlilik, ").concat(i.algorithmData.totalCuts," kesim"))}catch(e){console.error("Ger\xe7ek kesim optimizasyon hatası:",e),A("Ger\xe7ek kesim optimizasyonu sırasında hata oluştu: "+e.message)}finally{k(!1)}},500)}catch(e){console.error("Maksimizasyon hatası:",e),A("Maksimizasyon sırasında hata oluştu: "+e.message),k(!1)}}},Q=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"adaptive";if(0!==e.length){k(!0),U({currentAlgorithm:"",progress:0,stage:"Par\xe7alar maksimize ediliyor...",completed:0,total:"multi"===t||"hybrid"===t?3:1});try{await _(),setTimeout(async()=>{try{let i;U(e=>({...e,stage:"Gelişmiş optimizasyon başlıyor..."}));let s=new H(e,a,e=>{U(t=>({...t,currentAlgorithm:e.algorithm,progress:e.progress,stage:e.stage}))});switch(t){case"multi":U(e=>({...e,stage:"Multi-Algorithm Analysis",total:3})),i=await s.optimizeWithMultipleAlgorithms(["basic","genetic","annealing"]),A("\uD83C\uDFC6 Multi-Algorithm: En iyi = ".concat(i.algorithmComparison.bestAlgorithm));break;case"hybrid":U(e=>({...e,stage:"Hybrid 3-Stage Process",total:3})),i=await s.optimizeWithHybridApproach(),A("\uD83D\uDD2C Hybrid: ".concat(i.hybridAnalysis.improvement.toFixed(1),"% iyileştirme"));break;case"adaptive":U(e=>({...e,currentAlgorithm:"\uD83C\uDFAF Akıllı Se\xe7im",progress:50,completed:0,stage:"Problem analiz ediliyor..."})),await new Promise(e=>setTimeout(e,300)),U(e=>({...e,progress:100,completed:1,stage:"En uygun algoritma \xe7alıştırılıyor..."})),i=await s.optimizeWithAdaptiveParameters(),A("\uD83C\uDFAF Adaptive: Otomatik algoritma se\xe7imi tamamlandı")}N(i)}catch(e){console.error("Gelişmiş optimizasyon hatası:",e),A("Gelişmiş optimizasyon sırasında hata oluştu: "+e.message)}finally{k(!1),U({currentAlgorithm:"",progress:0,stage:"",completed:0,total:0})}},500)}catch(e){console.error("Maksimizasyon hatası:",e),A("Maksimizasyon sırasında hata oluştu: "+e.message),k(!1)}}},J=a=>{t(e.filter(e=>e.id!==a))},et=e=>{j(a.filter(t=>t.id!==e))},ea=e=>{C(e.id),M({length:e.length.toString(),width:e.width.toString(),height:e.height.toString(),quantity:e.quantity.toString(),label:e.label})},es=()=>{D&&F.length&&F.width&&F.height&&F.quantity&&F.label&&(t(e.map(e=>e.id===D?{...e,length:parseFloat(F.length),width:parseFloat(F.width),height:parseFloat(F.height),quantity:parseInt(F.quantity),label:F.label}:e)),C(null),M({length:"",width:"",height:"",quantity:"",label:""}))},el=()=>{C(null),M({length:"",width:"",height:"",quantity:"",label:""})},en=(0,s.useMemo)(()=>({totalPieces:e.reduce((e,t)=>e+t.quantity,0),totalVolume:e.reduce((e,t)=>e+t.length*t.width*t.height*t.quantity,0)}),[e]),er=async()=>{if(!v)return void alert("\xd6nce optimizasyon yapın!");k(!0),A("Kalan par\xe7alar optimize ediliyor...");try{let i=v.layouts.map((e,t)=>{let i=a.find(t=>t.id===e.stockId);if(!i)return null;let s=i.length*i.width*i.height,l=s*e.utilization/100,n=s-l;return{blockIndex:t+1,stockLabel:i.label,totalVolume:s,usedVolume:l,wasteVolume:n,wastePercentage:(n/s*100).toFixed(1),stockDimensions:{length:i.length,width:i.width,height:i.height}}}).filter(Boolean);if(1e3>i.reduce((e,t)=>e+t.wasteVolume,0)){A("Fire miktarı \xe7ok d\xfcş\xfck. Ekstra optimizasyon gerekmiyor!"),k(!1);return}let s=e.reduce((e,t)=>{let a=t.length*t.width*t.height,i=e.length*e.width*e.height;return a<i?t:e}),l=0;if(i.forEach(e=>{if(!e)return;let t=Math.floor(e.wasteVolume/(s.length*s.width*s.height));l+=t}),l>0){let a=e.map(e=>e.id===s.id?{...e,quantity:e.quantity+l}:e);t(a),A("Fire optimize edildi! ".concat(l,' adet "').concat(s.label,'" daha eklenebilir. Tekrar optimizasyon yapın.'))}else A("Fire par\xe7aları mevcut par\xe7a boyutlarına uygun değil. Daha k\xfc\xe7\xfck par\xe7alar deneyin.")}catch(e){console.error("Fire optimizasyon hatası:",e),A("Fire optimizasyonu sırasında hata oluştu.")}finally{k(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("div",{className:"header shadow-sm",children:(0,i.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,i.jsx)(l.A,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),(0,i.jsxs)("div",{className:"text-center sm:text-left",children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"S\xfcnger Kesim Optimizasyonu"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"3D optimizasyon ile minimum israf"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)("button",{onClick:()=>P(!0),className:"btn btn-secondary text-sm",title:"Materyal K\xfct\xfcphanesi",children:[(0,i.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"Materyaller"]}),(0,i.jsxs)("button",{onClick:()=>I(!0),className:"btn btn-secondary text-sm",title:"Proje Şablonları",children:[(0,i.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"Şablonlar"]}),(0,i.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"v2.0 Pro"})]})]})})}),z&&(0,i.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:(0,i.jsx)("div",{className:"alert alert-info",children:(0,i.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,i.jsx)(r.A,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-sm font-medium",children:z})]})})}),(0,i.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,i.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(l.A,{className:"w-5 h-5 text-orange-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Ham Malzeme"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Kesilecek s\xfcnger blokları"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Uzunluk",value:R.length,onChange:e=>V({...R,length:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Genişlik",value:R.width,onChange:e=>V({...R,width:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Kalınlık",value:R.height,onChange:e=>V({...R,height:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",placeholder:"Adet",value:R.quantity,onChange:e=>V({...R,quantity:e.target.value}),className:"input"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[(0,i.jsx)("input",{type:"text",placeholder:"Malzeme adı",value:R.label,onChange:e=>V({...R,label:e.target.value}),className:"input"}),(0,i.jsxs)("button",{onClick:()=>{R.length&&R.width&&R.height&&R.label&&(j([...a,{id:Date.now().toString(),length:parseFloat(R.length),width:parseFloat(R.width),height:parseFloat(R.height),quantity:parseInt(R.quantity),label:R.label}]),V({length:"",width:"",height:"",quantity:"1",label:"S\xfcnger Blok"}))},className:"btn btn-primary",children:[(0,i.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Malzeme Ekle"]})]}),(0,i.jsx)("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:a.map(e=>(0,i.jsx)("div",{className:"bg-gray-50 border border-gray-200 p-3 rounded-lg",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.label}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[e.length,"\xd7",e.width,"\xd7",e.height,"cm \xd7 ",e.quantity," adet"]})]}),(0,i.jsx)("button",{onClick:()=>et(e.id),className:"ml-3 p-1 text-red-600 hover:text-red-800",children:(0,i.jsx)(o.A,{className:"w-4 h-4"})})]})},e.id))})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(d.A,{className:"w-5 h-5 text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Kesilecek Par\xe7alar"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"\xdcretilecek par\xe7a listesi"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-4",children:[(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Uzunluk",value:q.length,onChange:e=>K({...q,length:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Genişlik",value:q.width,onChange:e=>K({...q,width:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Kalınlık",value:q.height,onChange:e=>K({...q,height:e.target.value}),className:"input"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,i.jsx)("input",{type:"number",placeholder:"Adet",value:q.quantity,onChange:e=>K({...q,quantity:e.target.value}),className:"input"}),(0,i.jsx)("button",{onClick:()=>{if(!q.length||!q.width||!q.height||0===a.length)return void alert("\xd6nce par\xe7a \xf6l\xe7\xfclerini girin!");let e=parseFloat(q.length),t=parseFloat(q.width),i=parseFloat(q.height),s=0;a.forEach(a=>{let l=0;[[e,t,i],[e,i,t],[t,e,i],[t,i,e],[i,e,t],[i,t,e]].forEach(e=>{let[t,i,s]=e,n=Math.floor(a.length/t),r=Math.floor(a.width/i),c=Math.floor(a.height/s);l=Math.max(l,n*r*c)}),s+=l*a.quantity}),K({...q,quantity:s.toString()})},className:"btn btn-secondary text-sm",title:"Bu par\xe7a i\xe7in maksimum adet hesapla",children:"MAX ADET"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[(0,i.jsx)("input",{type:"text",placeholder:"Par\xe7a adı",value:q.label,onChange:e=>K({...q,label:e.target.value}),className:"input"}),(0,i.jsxs)("button",{onClick:()=>{q.length&&q.width&&q.height&&q.label&&(t([...e,{id:Date.now().toString(),length:parseFloat(q.length),width:parseFloat(q.width),height:parseFloat(q.height),quantity:parseInt(q.quantity),label:q.label,color:"hsl(".concat(360*Math.random(),", 65%, 55%)")}]),K({length:"",width:"",height:"",quantity:"1",label:"Par\xe7a"}))},className:"btn btn-primary",children:[(0,i.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Par\xe7a Ekle"]})]}),(0,i.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[e.map(e=>(0,i.jsx)("div",{className:"bg-gray-50 border border-gray-200 p-3 rounded-lg",children:D===e.id?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Uzunluk",value:F.length,onChange:e=>M({...F,length:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Genişlik",value:F.width,onChange:e=>M({...F,width:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"number",step:"0.1",placeholder:"Kalınlık",value:F.height,onChange:e=>M({...F,height:e.target.value}),className:"input"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)("input",{type:"number",placeholder:"Adet",value:F.quantity,onChange:e=>M({...F,quantity:e.target.value}),className:"input"}),(0,i.jsx)("input",{type:"text",placeholder:"Par\xe7a adı",value:F.label,onChange:e=>M({...F,label:e.target.value}),className:"input"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)("button",{onClick:es,className:"btn btn-primary flex-1 text-sm",children:[(0,i.jsx)(h.A,{className:"w-4 h-4 mr-1"}),"Kaydet"]}),(0,i.jsxs)("button",{onClick:el,className:"btn btn-secondary flex-1 text-sm",children:[(0,i.jsx)(m.A,{className:"w-4 h-4 mr-1"}),"İptal"]})]})]}):(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.label}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[e.length,"\xd7",e.width,"\xd7",e.height,"cm \xd7 ",e.quantity," adet"]})]}),(0,i.jsxs)("div",{className:"flex gap-1 ml-3",children:[(0,i.jsx)("button",{onClick:()=>ea(e),className:"p-1 text-blue-600 hover:text-blue-800",title:"D\xfczenle",children:(0,i.jsx)(x.A,{className:"w-4 h-4"})}),(0,i.jsx)("button",{onClick:()=>J(e.id),className:"p-1 text-red-600 hover:text-red-800",title:"Sil",children:(0,i.jsx)(o.A,{className:"w-4 h-4"})})]})]})},e.id)),0===e.length&&(0,i.jsxs)("div",{className:"text-center text-gray-500 py-12 border-2 border-dashed border-gray-200 rounded-lg",children:[(0,i.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,i.jsx)("p",{className:"text-lg font-medium",children:"Hen\xfcz par\xe7a eklenmedi"}),(0,i.jsx)("p",{className:"text-sm mt-1",children:"Yukarıdaki formu kullanarak par\xe7a ekleyin"})]})]})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(n.A,{className:"w-5 h-5 text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Optimizasyon Se\xe7enekleri"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"En uygun algoritmayı se\xe7in"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:X,disabled:0===e.length||w,className:"btn btn-primary w-full py-3",children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner mr-2"}),"Hesaplanıyor..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.A,{className:"w-5 h-5 mr-2"}),"Temel Optimizasyon"]})}),(0,i.jsx)("button",{onClick:Z,disabled:0===e.length||w,className:"btn btn-secondary w-full py-3",children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner mr-2"}),"Kesim hesaplanıyor..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{className:"w-5 h-5 mr-2"}),"Ger\xe7ek Makine Kesimi"]})}),(0,i.jsx)("button",{onClick:()=>Q("adaptive"),disabled:0===e.length||w,className:"btn btn-primary w-full py-3",children:w&&1===Y.total?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner mr-2"}),Y.currentAlgorithm||"Hesaplanıyor..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{className:"w-5 h-5 mr-2"}),"Akıllı Optimizasyon"]})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsx)("button",{onClick:()=>Q("multi"),disabled:0===e.length||w,className:"btn btn-secondary text-sm",children:w&&3===Y.total&&Y.stage.includes("Multi")?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner mr-1"}),Y.completed,"/",Y.total]}):"Multi-Algorithm"}),(0,i.jsx)("button",{onClick:()=>Q("hybrid"),disabled:0===e.length||w,className:"btn btn-secondary text-sm",children:w&&3===Y.total&&Y.stage.includes("Hybrid")?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner mr-1"}),Y.completed,"/",Y.total]}):"Hybrid"})]})]})]}),w&&Y.progress>0&&(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,i.jsx)(u.A,{className:"w-5 h-5 text-blue-600"})}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"İşlem Durumu"})]}),(0,i.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[Y.completed,"/",Y.total]})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-2",children:[(0,i.jsx)("span",{className:"truncate",children:Y.stage}),(0,i.jsxs)("span",{className:"ml-2 font-medium",children:[Math.round(Y.progress),"%"]})]}),(0,i.jsx)("div",{className:"progress-bar",children:(0,i.jsx)("div",{className:"progress-fill",style:{width:"".concat(Y.progress,"%")}})})]}),Y.currentAlgorithm&&(0,i.jsxs)("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg py-3",children:[(0,i.jsx)(p.A,{className:"w-5 h-5 text-yellow-500 mr-2"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-900",children:Y.currentAlgorithm})]})]})]}),(0,i.jsxs)("div",{className:"lg:col-span-7 space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"card p-6 text-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg mx-auto mb-4 flex items-center justify-center",children:(0,i.jsx)(l.A,{className:"w-6 h-6 text-blue-600"})}),(0,i.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:en.totalPieces}),(0,i.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"Toplam Par\xe7a"})]}),(0,i.jsxs)("div",{className:"card p-6 text-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg mx-auto mb-4 flex items-center justify-center",children:(0,i.jsx)(g.A,{className:"w-6 h-6 text-green-600"})}),(0,i.jsxs)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:[(en.totalVolume/1e3).toFixed(1),"L"]}),(0,i.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"Toplam Hacim"})]})]}),v&&(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(n.A,{className:"w-5 h-5 text-green-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Optimizasyon Sonu\xe7ları"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Hesaplama tamamlandı!"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,i.jsx)(l.A,{className:"w-5 h-5 text-orange-600"})}),(0,i.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:v.layouts.length}),(0,i.jsx)("div",{className:"text-xs text-gray-500 font-medium",children:"Kullanılan Blok"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,i.jsx)(p.A,{className:"w-5 h-5 text-green-600"})}),(0,i.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[v.efficiency.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"text-xs text-gray-500 font-medium",children:"Verimlilik"})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,i.jsx)(o.A,{className:"w-5 h-5 text-red-600"})}),(0,i.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:[v.totalWaste.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"text-xs text-gray-500 font-medium",children:"Fire"})]})]}),v.totalWaste>5&&(0,i.jsx)("div",{className:"alert alert-warning",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-yellow-800 text-sm",children:"Fire Azaltılabilir"}),(0,i.jsx)("p",{className:"text-xs text-yellow-600",children:"Kalan par\xe7alar daha k\xfc\xe7\xfck par\xe7alara b\xf6l\xfcnebilir"})]}),(0,i.jsx)("button",{onClick:er,disabled:w,className:"btn btn-secondary text-sm",children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"spinner mr-1"}),"Hesaplıyor..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.A,{className:"w-4 h-4 mr-1"}),"Fireyi Azalt"]})})]})})]}),(0,i.jsxs)("div",{className:"card p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(b.A,{className:"w-5 h-5 text-purple-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Gelişmiş 3D G\xf6rselleştirme"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"İnteraktif 3D model ve analiz ara\xe7ları"})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:"AI G\xf6rselleştirme"}),(0,i.jsx)(n.A,{className:"w-4 h-4 text-purple-600"})]})]}),(0,i.jsx)("div",{className:"min-h-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-200 overflow-hidden",children:(0,i.jsx)(O,{pieces:e,stockFoams:a,optimizationResult:v})})]})]})]})}),v&&(0,i.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2 flex items-center",children:[(0,i.jsx)(b.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600 mr-3"}),"2D Kesit G\xf6r\xfcn\xfcmleri"]}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Her g\xf6r\xfcn\xfcm farklı a\xe7ıdan kesilmiş par\xe7aları g\xf6sterir"})]}),(0,i.jsxs)("div",{className:"mb-6 card overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-blue-600 px-4 sm:px-6 py-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yukarıdan G\xf6r\xfcn\xfcm (X-Y D\xfczlemi)"}),(0,i.jsx)("p",{className:"text-blue-100 text-sm",children:"Uzunluk \xd7 Genişlik boyutları g\xf6r\xfcn\xfcr"})]}),(0,i.jsx)("div",{className:"p-4 sm:p-6",children:(0,i.jsx)("div",{className:"w-full bg-gray-50 rounded-lg border border-gray-200 overflow-hidden",children:(0,i.jsx)(G,{pieces:e,stockFoams:a,optimizationResult:v,fixedView:"top",showTabs:!1,scale:.6})})})]}),(0,i.jsxs)("div",{className:"mb-6 card overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-green-600 px-4 sm:px-6 py-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\xd6nden G\xf6r\xfcn\xfcm (X-Z D\xfczlemi)"}),(0,i.jsx)("p",{className:"text-green-100 text-sm",children:"Uzunluk \xd7 Kalınlık boyutları g\xf6r\xfcn\xfcr"})]}),(0,i.jsx)("div",{className:"p-4 sm:p-6",children:(0,i.jsx)("div",{className:"w-full bg-gray-50 rounded-lg border border-gray-200 overflow-hidden",children:(0,i.jsx)(G,{pieces:e,stockFoams:a,optimizationResult:v,fixedView:"front",showTabs:!1,scale:.6})})})]}),(0,i.jsxs)("div",{className:"mb-6 card overflow-hidden",children:[(0,i.jsxs)("div",{className:"bg-purple-600 px-4 sm:px-6 py-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Yandan G\xf6r\xfcn\xfcm (Y-Z D\xfczlemi)"}),(0,i.jsx)("p",{className:"text-purple-100 text-sm",children:"Genişlik \xd7 Kalınlık boyutları g\xf6r\xfcn\xfcr"})]}),(0,i.jsx)("div",{className:"p-4 sm:p-6",children:(0,i.jsx)("div",{className:"w-full bg-gray-50 rounded-lg border border-gray-200 overflow-hidden",children:(0,i.jsx)(G,{pieces:e,stockFoams:a,optimizationResult:v,fixedView:"side",showTabs:!1,scale:.6})})})]})]}),v&&(0,i.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsxs)("div",{className:"card p-6 sm:p-8 text-center",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-lg mx-auto mb-4 flex items-center justify-center",children:(0,i.jsx)(y.A,{className:"w-8 h-8 text-blue-600"})}),(0,i.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3",children:"Detaylı Rapor"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 max-w-2xl mx-auto",children:"T\xfcm optimizasyon sonu\xe7larını, malzeme listelerini ve kesim planlarını i\xe7eren kapsamlı PDF raporu oluşturun."})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,i.jsxs)("button",{onClick:()=>{if(!v)return void alert("\xd6nce optimizasyon yapın!");let t=(t,i)=>{let s=v.layouts.map((i,s)=>{let l,n,r,c=a.find(e=>e.id===i.stockId);if(!c)return"";switch(t){case"top":l=c.length,n=c.width,r="Kalınlık: ".concat(c.height,"cm");break;case"front":l=c.length,n=c.height,r="Derinlik: ".concat(c.width,"cm");break;case"side":l=c.width,n=c.height,r="Derinlik: ".concat(c.length,"cm")}let o=Math.min(400/l,300/n),d=l*o,h=n*o,m=i.pieces.map(a=>{let i,s,l,n,r,c=e.find(e=>a.pieceId.startsWith(e.id));if(!c)return"";switch(t){case"top":i=a.x/10*o,s=a.y/10*o,l=c.length*o,n=c.width*o,r="".concat(c.height,"cm");break;case"front":i=a.x/10*o,s=a.z/10*o,l=c.length*o,n=c.height*o,r="".concat(c.width,"cm");break;case"side":i=a.y/10*o,s=a.z/10*o,l=c.width*o,n=c.height*o,r="".concat(c.length,"cm")}return'\n            <rect x="'.concat(i,'" y="').concat(s,'" width="').concat(l,'" height="').concat(n,'" \n                  fill="').concat(c.color||"#4F46E5",'" \n                  stroke="#000" stroke-width="1" opacity="0.8"/>\n            <text x="').concat(i+l/2,'" y="').concat(s+n/2,'" \n                  text-anchor="middle" dominant-baseline="middle" \n                  fill="white" font-size="10" font-weight="bold">\n              ').concat(c.label,'\n            </text>\n            <text x="').concat(i+l/2,'" y="').concat(s+n/2+12,'" \n                  text-anchor="middle" dominant-baseline="middle" \n                  fill="white" font-size="8">\n              ').concat(r,"\n            </text>\n          ")}).join("");return'\n          <div style="margin-bottom: 40px; text-align: center;">\n            <h3 style="margin-bottom: 10px;">Blok '.concat(s+1," - ").concat(c.label,'</h3>\n            <p style="margin-bottom: 15px; color: #666;">').concat(r," | Verimlilik: ").concat(i.utilization.toFixed(1),'%</p>\n            <svg width="').concat(d+80,'" height="').concat(h+80,'" style="border: 2px solid #ddd; background: #f9f9f9;">\n              <rect x="40" y="40" width="').concat(d,'" height="').concat(h,'" \n                    fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>\n              ').concat(m,'\n              <text x="').concat(40+d/2,'" y="').concat(h+65,'" \n                    text-anchor="middle" font-size="12" fill="#666">\n                ').concat(l,'cm\n              </text>\n              <text x="25" y="').concat(40+h/2,'" \n                    text-anchor="middle" font-size="12" fill="#666" \n                    transform="rotate(-90, 25, ').concat(40+h/2,')">\n                ').concat(n,"cm\n              </text>\n            </svg>\n          </div>\n        ")}).join("");return'\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <meta charset="utf-8">\n          <title>'.concat(i,'</title>\n          <style>\n            @page { margin: 20mm; size: A4; }\n            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }\n            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }\n            .logo { max-width: 100px; height: auto; margin-bottom: 10px; }\n            h1 { color: #333; margin: 10px 0; }\n            .subtitle { color: #666; margin-bottom: 20px; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo.jpeg" alt="Logo" class="logo">\n            <h1>').concat(i,"</h1>\n            <p>Oluşturulma Tarihi: ").concat(new Date().toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),"</p>\n          </div>\n          ").concat(s,"\n        </body>\n        </html>\n      ")},i={title:"S\xfcnger Kesim Optimizasyon Raporu",date:new Date().toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),summary:{totalPieces:en.totalPieces,totalVolume:(en.totalVolume/1e3).toFixed(1)+"L",efficiency:v.efficiency.toFixed(1)+"%",waste:v.totalWaste.toFixed(1)+"%",blocksUsed:v.layouts.length},stockMaterials:a.map(e=>({label:e.label,dimensions:"".concat(e.length,"\xd7").concat(e.width,"\xd7").concat(e.height,"cm"),quantity:e.quantity,volume:(e.length*e.width*e.height*e.quantity/1e3).toFixed(1)+"L"})),pieces:e.map(e=>({label:e.label,dimensions:"".concat(e.length,"\xd7").concat(e.width,"\xd7").concat(e.height,"cm"),quantity:e.quantity,unitVolume:(e.length*e.width*e.height/1e3).toFixed(3)+"L",totalVolume:(e.length*e.width*e.height*e.quantity/1e3).toFixed(1)+"L"})),layouts:v.layouts.map((t,i)=>{let s=a.find(e=>e.id===t.stockId);return{blockNumber:i+1,stockLabel:(null==s?void 0:s.label)||"Bilinmeyen",utilization:t.utilization.toFixed(1)+"%",piecesCount:t.pieces.length,pieces:t.pieces.map(t=>{let a=e.find(e=>t.pieceId.startsWith(e.id));return{label:(null==a?void 0:a.label)||"Bilinmeyen",position:"X:".concat((t.x/10).toFixed(1),", Y:").concat((t.y/10).toFixed(1),", Z:").concat((t.z/10).toFixed(1),"cm"),rotated:t.rotated?"Evet":"Hayır"}})}})},s='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="utf-8">\n        <title>'.concat(i.title,'</title>\n        <style>\n          @page { margin: 20mm; size: A4; }\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; line-height: 1.6; }\n          .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\n          .logo { max-width: 120px; height: auto; margin-bottom: 15px; }\n          .section { margin-bottom: 30px; page-break-inside: avoid; }\n          .section h2 { color: #333; border-bottom: 1px solid #ddd; padding-bottom: 10px; }\n          .summary-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0; }\n          .summary-item { background: #f5f5f5; padding: 15px; border-radius: 8px; text-align: center; }\n          .summary-value { font-size: 24px; font-weight: bold; color: #2563eb; }\n          .summary-label { color: #666; margin-top: 5px; }\n          table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n          th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }\n          th { background-color: #f8f9fa; font-weight: bold; }\n          .layout-section { margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 8px; }\n          .piece-position { font-family: monospace; font-size: 12px; }\n          .rotated-yes { color: #ef4444; font-weight: bold; }\n          .rotated-no { color: #10b981; }\n          .page-break { page-break-before: always; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <img src="/logo.jpeg" alt="Logo" class="logo">\n          <h1>').concat(i.title,"</h1>\n          <p>Oluşturulma Tarihi: ").concat(i.date,'</p>\n        </div>\n        \n        <div class="section">\n          <h2>\uD83D\uDCCA \xd6zet Bilgiler</h2>\n          <div class="summary-grid">\n            <div class="summary-item">\n              <div class="summary-value">').concat(i.summary.totalPieces,'</div>\n              <div class="summary-label">Toplam Par\xe7a</div>\n            </div>\n            <div class="summary-item">\n              <div class="summary-value">').concat(i.summary.totalVolume,'</div>\n              <div class="summary-label">Toplam Hacim</div>\n            </div>\n            <div class="summary-item">\n              <div class="summary-value">').concat(i.summary.efficiency,'</div>\n              <div class="summary-label">Verimlilik</div>\n            </div>\n            <div class="summary-item">\n              <div class="summary-value">').concat(i.summary.waste,'</div>\n              <div class="summary-label">Fire</div>\n            </div>\n            <div class="summary-item">\n              <div class="summary-value">').concat(i.summary.blocksUsed,'</div>\n              <div class="summary-label">Kullanılan Blok</div>\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <h2>\uD83D\uDCE6 Ham Malzemeler</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Malzeme Adı</th>\n                <th>Boyutlar</th>\n                <th>Adet</th>\n                <th>Toplam Hacim</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(i.stockMaterials.map(e=>"\n                <tr>\n                  <td>".concat(e.label,"</td>\n                  <td>").concat(e.dimensions,"</td>\n                  <td>").concat(e.quantity,"</td>\n                  <td>").concat(e.volume,"</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n        </div>\n\n        <div class="section">\n          <h2>✂️ Kesilecek Par\xe7alar</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Par\xe7a Adı</th>\n                <th>Boyutlar</th>\n                <th>Adet</th>\n                <th>Birim Hacim</th>\n                <th>Toplam Hacim</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(i.pieces.map(e=>"\n                <tr>\n                  <td>".concat(e.label,"</td>\n                  <td>").concat(e.dimensions,"</td>\n                  <td>").concat(e.quantity,"</td>\n                  <td>").concat(e.unitVolume,"</td>\n                  <td>").concat(e.totalVolume,"</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n        </div>\n\n        <div class="section">\n          <h2>\uD83C\uDFAF Optimizasyon Sonu\xe7ları</h2>\n          ').concat(i.layouts.map(e=>'\n            <div class="layout-section">\n              <h3>Blok '.concat(e.blockNumber," - ").concat(e.stockLabel,"</h3>\n              <p><strong>Verimlilik:</strong> ").concat(e.utilization," | <strong>Par\xe7a Sayısı:</strong> ").concat(e.piecesCount,"</p>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Par\xe7a Adı</th>\n                    <th>Pozisyon (cm)</th>\n                    <th>D\xf6nd\xfcr\xfcld\xfc m\xfc?</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  ").concat(e.pieces.map(e=>"\n                    <tr>\n                      <td>".concat(e.label,'</td>\n                      <td class="piece-position">').concat(e.position,'</td>\n                      <td class="').concat("Evet"===e.rotated?"rotated-yes":"rotated-no",'">').concat(e.rotated,"</td>\n                    </tr>\n                  ")).join(""),"\n                </tbody>\n              </table>\n            </div>\n          ")).join(""),'\n        </div>\n\n        \x3c!-- 2D Kesit G\xf6r\xfcn\xfcmleri --\x3e\n        <div class="page-break">\n          ').concat(t("top","\uD83D\uDD3D Yukarıdan G\xf6r\xfcn\xfcm (X-Y D\xfczlemi)"),'\n        </div>\n\n        <div class="page-break">\n          ').concat(t("front","➡️ \xd6nden G\xf6r\xfcn\xfcm (X-Z D\xfczlemi)"),'\n        </div>\n\n        <div class="page-break">\n          ').concat(t("side","⬅️ Yandan G\xf6r\xfcn\xfcm (Y-Z D\xfczlemi)"),'\n        </div>\n\n        <div class="section page-break">\n          <h2>\uD83D\uDCCB Notlar</h2>\n          <ul>\n            <li>Bu rapor AI destekli 3D optimizasyon algoritması kullanılarak oluşturulmuştur.</li>\n            <li>Par\xe7alar 8 farklı rotasyon se\xe7eneği ile optimize edilmiştir.</li>\n            <li>Pozisyon değerleri sol-alt-\xf6n k\xf6şeden başlayarak cm cinsindedir.</li>\n            <li>Verimlilik y\xfczdesi kullanılan hacmin toplam hacme oranını g\xf6sterir.</li>\n            <li>D\xf6nd\xfcr\xfclm\xfcş par\xe7alar farklı y\xf6nelimde yerleştirilmiştir.</li>\n            <li>2D kesit g\xf6r\xfcn\xfcmleri \xfcretim i\xe7in kullanılabilir.</li>\n            <li>Minimum fire hedefi ile optimize edilmiştir.</li>\n          </ul>\n        </div>\n      </body>\n      </html>\n    '),l=window.open("","_blank");l&&(l.document.write(s),l.document.close(),l.print())},className:"btn btn-secondary text-base px-6 py-3",children:[(0,i.jsx)(y.A,{className:"w-5 h-5 mr-2"}),"Basit Rapor"]}),(0,i.jsxs)("button",{onClick:()=>E(!0),className:"btn btn-primary text-base px-6 py-3",children:[(0,i.jsx)(n.A,{className:"w-5 h-5 mr-2"}),"Gelişmiş Analiz Raporu",(0,i.jsx)(f.A,{className:"w-4 h-4 ml-2"})]})]})]})}),v&&v.layouts.length>0&&(0,i.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsx)($,{optimizationResult:v})}),v&&v.cuttingInstructions&&(0,i.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,i.jsx)(ee,{cuttingInstructions:v.cuttingInstructions,algorithmData:v.algorithmData})}),(0,i.jsx)("footer",{className:"bg-gray-800 text-white mt-12",children:(0,i.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,i.jsx)(l.A,{className:"w-5 h-5 text-white"})}),(0,i.jsx)("span",{className:"text-xl font-bold",children:"FoamCut Pro"})]}),(0,i.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Gelişmiş AI algoritmalarıyla s\xfcnger kesim optimizasyonu. Minimum israf, maksimum verimlilik."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold mb-4 text-gray-200",children:"\xd6zellikler"}),(0,i.jsxs)("ul",{className:"space-y-2 text-sm text-gray-300",children:[(0,i.jsx)("li",{children:"• Akıllı Optimizasyon"}),(0,i.jsx)("li",{children:"• Ger\xe7ek Makine Desteği"}),(0,i.jsx)("li",{children:"• Detaylı Raporlama"}),(0,i.jsx)("li",{children:"• Mobil Uyumlu"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-semibold mb-4 text-gray-200",children:"Teknoloji"}),(0,i.jsxs)("ul",{className:"space-y-2 text-sm text-gray-300",children:[(0,i.jsx)("li",{children:"• Genetic Algorithm"}),(0,i.jsx)("li",{children:"• Simulated Annealing"}),(0,i.jsx)("li",{children:"• 3D Visualization"}),(0,i.jsx)("li",{children:"• Real-time Analytics"})]})]})]}),(0,i.jsx)("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center",children:(0,i.jsx)("p",{className:"text-gray-300 text-sm",children:"\xa9 2024 FoamCut Optimizer v2.0 Pro - T\xfcm hakları saklıdır"})})]})}),S&&(0,i.jsx)(ei,{onSelectMaterial:e=>{j([...a,{id:Date.now().toString(),length:e.length,width:e.width,height:e.height,quantity:1,label:e.name}]),P(!1),A("".concat(e.name," malzemesi eklendi!"))},onClose:()=>P(!1)}),T&&(0,i.jsx)(eo,{onSelectTemplate:e=>{let a=e.pieces.map((e,t)=>({id:Date.now().toString()+"_"+t,length:e.length,width:e.width,height:e.height,quantity:e.quantity,label:e.label,color:e.color||"hsl(".concat(360*Math.random(),", 65%, 55%)")})),i=e.stockMaterials.map((e,t)=>({id:Date.now().toString()+"_stock_"+t,length:e.length,width:e.width,height:e.height,quantity:e.quantity,label:e.label}));t(a),j(i),I(!1),A("".concat(e.name," şablonu y\xfcklendi! ").concat(a.length," par\xe7a ve ").concat(i.length," malzeme eklendi."))},onClose:()=>I(!1)}),B&&v&&(0,i.jsx)(em,{optimizationResult:v,pieces:e,stockFoams:a,onClose:()=>E(!1)})]})}},7287:(e,t,a)=>{Promise.resolve().then(a.bind(a,5376))}},e=>{var t=t=>e(e.s=t);e.O(0,[367,831,413,901,441,684,358],()=>t(7287)),_N_E=e.O()}]);